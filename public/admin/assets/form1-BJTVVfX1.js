import{r as d,j as e,B as u}from"./index-CxoETvRH.js";import{c as h}from"./category-B47W4ZXV.js";import j from"./index-Bnb9KI_6.js";import{F as s}from"./index-C_bV-DnG.js";import{I as a}from"./index-4oTavk15.js";import{R as f}from"./DeleteOutlined-CBiNWy3g.js";import{R as g}from"./PlusOutlined-vk23tUE5.js";import{R as b,C as m}from"./row-qzGwq4Dr.js";import{W as F}from"./index-w3B4RVYE.js";import{W as C}from"./index-B5gW4Hci.js";import{F as I}from"./index-DiLyVsjM.js";import{P as q}from"./index-CDZ7eLlT.js";import{P as x}from"./index-BV5Zm_mO.js";import{P as w}from"./index-K8hm1ODa.js";import"./antd-img-crop.esm-DlFTDGwj.js";import"./index-BOtvnYjU.js";import"./PurePanel-Qn0-6z3A.js";import"./index-BDTAXPlV.js";import"./useBreakpoint-9N_aLd03.js";import"./progress-Ofxp_QxA.js";import"./DownOutlined-CKTuMrT9.js";import"./getAllowClear-61dfOySQ.js";import"./index-C-0gitmI.js";import"./CheckOutlined-DNlRZmOM.js";import"./file-Clf_3ubf.js";/* empty css              */import"./index-BLklr69N.js";import"./index-CVyj0YhM.js";import"./EllipsisOutlined-DYRNvKIw.js";import"./Overflow-C1Gv4RUW.js";import"./Dropdown-B_0_MLsu.js";import"./index-DsYJmDxZ.js";import"./index-DPelJOqh.js";import"./index-CvzSf1Bg.js";import"./BaseForm-Ce_dWbWI.js";import"./CopyOutlined-DoMFKUVx.js";import"./index-Bcl-gWmM.js";import"./index-BphrQzO9.js";import"./gapSize-U1swVQyS.js";import"./addEventListener-DSaIWks1.js";import"./iconUtil-CrL5XMUw.js";import"./index-BbWS0DN_.js";import"./move-BEwii-fV.js";import"./Input-DBs5aIW3.js";import"./index-BCcQRwwP.js";import"./LeftOutlined-CXR1ue2q.js";import"./index-BiKlR4w8.js";import"./index-r-JVz4Yx.js";import"./index-BZDhPRiF.js";import"./TextArea-B06lod9y.js";import"./index-JNVvr94D.js";const _=({specForm:t,initialValues:o})=>{const[l]=s.useForm();return d.useEffect(()=>{o&&l.setFieldsValue({specForm:o})},[o]),e.jsx(s,{form:l,className:"form-spec",onValuesChange:(p,i)=>{t&&t(i)},children:e.jsx(s.List,{name:"specForm",children:(p,{add:i,remove:n})=>e.jsxs("div",{className:"form-item-total-container",children:[e.jsx("div",{className:"item-container",children:p.map((r,c)=>e.jsxs("div",{className:"form-item-container",children:[e.jsx(s.Item,{...r,label:"规格名称",name:[r.name,"spec_name"],className:"form-item",rules:[{required:!0,message:"请输入规格名称"}],children:e.jsx(a,{})}),e.jsx(s.Item,{...r,label:"价格（元）",name:[r.name,"price_adjustment"],className:"form-item",rules:[{required:!0,message:"请输入价格"}],children:e.jsx(a,{defaultValue:"0.00"})}),e.jsx(s.Item,{...r,label:"精度（宽 px）",name:[r.name,"accuracy_width"],className:"form-item",rules:[{required:!1,message:"请输入精度（宽 px）"}],children:e.jsx(a,{defaultValue:0})}),e.jsx(s.Item,{...r,label:"精度（高 px）",name:[r.name,"accuracy_height"],className:"form-item",rules:[{required:!1,message:"请输入精度（高 px）"}],children:e.jsx(a,{defaultValue:0})}),e.jsx(s.Item,{...r,label:"库存",name:[r.name,"stock"],className:"form-item",rules:[{required:!0,message:"请输入库存"}],children:e.jsx(a,{})}),e.jsx(s.Item,{...r,label:"排序",name:[r.name,"sort"],className:"form-item",rules:[{required:!0,message:"请输入排序"}],children:e.jsx(a,{})}),e.jsx(s.Item,{className:"form-item",children:e.jsx(f,{className:"delete-icon",onClick:()=>n(c)})})]},r.key))}),e.jsx("div",{className:"add-button-container",children:e.jsx(u,{type:"dashed",onClick:()=>i({spec_name:"",price_adjustment:"0.00",accuracy_width:0,accuracy_height:0,stock:0,sort:0}),icon:e.jsx(g,{}),children:"新增规格"})})]})})})},qe=({typeAction:t,form:o,specForm:l})=>{const[p,i]=d.useState([]),n=r=>{o.setFieldsValue({product_spec:r.specForm})};return d.useEffect(()=>{t==="update"&&i([...l])},[t,l]),e.jsx(e.Fragment,{children:e.jsxs(b,{gutter:[24,0],children:[e.jsx(m,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,children:e.jsx(F,{name:"cate_id",label:"产品类型",placeholder:"请选择",fieldform:{showSearch:!0,optionFilterProp:"label"},request:async()=>(await h.getList({pageSize:9999})).data.data.map(c=>({label:c.cate_name,value:c.id})),rules:[{required:!0,message:"请选择"}],labelCol:{span:6},wrapperCol:{span:10}})}),e.jsx(m,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,children:e.jsx(C,{name:"product_name",label:"产品名称",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],labelCol:{span:6},wrapperCol:{span:10}})}),e.jsx(m,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,children:e.jsx(I,{name:"sort",label:"排序",placeholder:"请输入",fieldform:{precision:0,style:{width:"100%"}},min:0,extra:"数值越大，排序越靠前",rules:[{required:!0,message:"请输入"}],labelCol:{span:6},wrapperCol:{span:10}})}),e.jsx(m,{xs:24,sm:24,md:24,lg:24,xl:12,xxl:24,children:e.jsx(x.Item,{name:"main_image",label:"产品图片",rules:[{required:!0,message:"请输入"}],children:e.jsx(j,{})})}),e.jsx(m,{xs:24,sm:24,md:24,lg:24,xl:12,xxl:24,children:e.jsx(w,{name:"description",label:"AI关键词",placeholder:"请输入",fieldProps:{autoSize:{minRows:2,maxRows:6}},rules:[{required:!1,message:"请输入"}]})}),e.jsx(m,{xs:24,sm:24,md:24,lg:24,xl:12,xxl:24,children:e.jsx(x.Item,{name:"product_spec",label:"产品规格",rules:[{required:!1,message:"请输入"}],children:e.jsx(_,{specForm:n,initialValues:p})})}),e.jsx(m,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,children:e.jsx(q,{name:"status",label:"上架状态",extra:"",checkedChildren:"上架",unCheckedChildren:"下架",checked:!0,rules:[{required:!0,message:"请选择"}],labelCol:{span:6},wrapperCol:{span:10}})})]})})};export{qe as default};
