import{A as q,r as x,j as e,B as w,dj as L,aK as M,c as I}from"./index-BTXTJVKt.js";import{c as U}from"./category-BMjbp_yY.js";import k from"./index-BHvnnI9L.js";import{f as N}from"./file-HyvBP1Hh.js";import{S as V}from"./index-B1B7dhZb.js";import{C as T}from"./index-CM2B2jkZ.js";import{I as P,P as z}from"./index-Cpu1JcVa.js";import{R as D}from"./index-DZ2tAw4A.js";import{R as E}from"./DeleteOutlined-sMe1csST.js";import{U as $}from"./index-Bms52pX5.js";import{R as W}from"./PlusOutlined-DhDAnJdR.js";import{R as B,C as r}from"./row-DJNm5-9Y.js";import{D as d}from"./index-Wn9_u9d6.js";import{W as c}from"./index-CNcHXf2n.js";import{F as f}from"./index-CaCv7gJm.js";import{P as G}from"./index-CQ-JO01F.js";import{T as K}from"./index-Dx9hPCiE.js";import{P as O}from"./index-Ct2uWT4U.js";import{P as v}from"./index-D_n6I86r.js";import"./antd-img-crop.esm-BiYxeaxO.js";import"./index-JJDTxIwy.js";import"./PurePanel-BJ0dSvru.js";import"./progress-C-smal5r.js";import"./DownOutlined-dHMiLU6h.js";import"./getAllowClear-SV9Asyat.js";import"./index-DWyRM-jO.js";import"./CheckOutlined-CRheHqkM.js";/* empty css              */import"./index-CHGWkdWj.js";import"./EllipsisOutlined-BzWcE7tF.js";import"./Overflow-DodMVMUF.js";import"./Dropdown-D-FCcTPI.js";import"./index-DwWsiyHK.js";import"./index-BaexhYUL.js";import"./BaseForm-Bt-x2uS5.js";import"./CopyOutlined-Bqo58qRo.js";import"./index-CsweGtVO.js";import"./index-CBjIPB84.js";import"./useBreakpoint-C9P5ZgXD.js";import"./gapSize-U1swVQyS.js";import"./addEventListener-BQxGY-6f.js";import"./iconUtil-0otcsGdb.js";import"./index-D1w3VCkm.js";import"./move-BiL2XrK1.js";import"./Input-CJszbmX7.js";import"./index-Ci-Y97rG.js";import"./LeftOutlined-CNJksXTb.js";import"./index-BfhOKpHw.js";import"./index-D5nMW6Hn.js";import"./TextArea-Dm9DBQS4.js";import"./EditOutlined-Jb-cOsu8.js";import"./styleChecker-xca8e-q0.js";import"./index-Ck2b4VHc.js";const Y=({value:o=[],onChange:u,maxCount:h=5,...j})=>{const{message:t}=q.useApp(),[m,i]=x.useState(!1),[l,y]=x.useState(!1),[A,_]=x.useState(""),p=Array.isArray(o)?o:o?[o]:[],C=s=>{var a,g;if(s.file.status==="uploading"&&i(!0),s.file.status==="error"){const n=((a=s.file.error)==null?void 0:a.message)||((g=s.file.response)==null?void 0:g.message)||"图片限制在1M以内~";t.error(n),i(!1)}if(s.file.status==="done"){if(s.file.response.code===1){const n=s.file.response.data.img,R=[...p,n];u(R)}else t.error("后端上传图片失败~");i(!1)}},S=s=>{const a=p.filter((g,n)=>n!==s);u(a)},b=s=>{_(s),y(!0)},F=s=>s.type.startsWith("image/")?s.size/1024/1024>I.uploadImgMax?(t.error(`图片太大，请控制在 ${I.uploadImgMax}M 以内~`),!1):!0:(t.error("只能上传图片~"),!1);return e.jsxs(e.Fragment,{children:[e.jsxs(V,{wrap:!0,size:[8,8],children:[p.map((s,a)=>e.jsx(T,{className:"uploaddan-img",size:"small",styles:{body:{padding:8}},children:e.jsxs("div",{className:"bg",children:[e.jsx(P,{src:s,preview:!1,onClick:()=>b(s)}),e.jsx("div",{className:"hover",children:e.jsxs("div",{children:[e.jsx(w,{type:"text",size:"small",onClick:()=>b(s),children:e.jsx(D,{className:"icon"})}),e.jsx(w,{type:"text",size:"small",onClick:()=>S(a),children:e.jsx(E,{className:"icon"})})]})})]})},a)),p.length<h&&e.jsx($,{accept:"image/*",capture:null,name:"img",listType:"picture-card",showUploadList:!1,action:N.uploadUrl,headers:{token:L()},onChange:C,beforeUpload:F,children:e.jsxs("div",{children:[m?e.jsx(M,{}):e.jsx(W,{}),e.jsx("div",{className:"ant-upload-text",children:"上传"})]})})]}),e.jsx(P,{style:{display:"none"},preview:{visible:l,src:A,onVisibleChange:s=>y(s)}})]})},{Text:He}=K,H={游戏:["魔兽世界","原神","塞尔达传说"],动漫:["吉卜力","新海诚","吉卜力水彩","迪士尼","皮克斯","莫比斯（复古漫画）","赛璐璐"],插画:["几米","第九朵云"],艺术:["油画","印象派","水彩","素描","国风","波谱","像素"],"3D":["桌面手办","毛绒玩偶","粘土玩偶"],其他:["桌面手办","毛绒玩偶","粘土玩偶"]},Je=({typeAction:o,...u})=>{const[h,j]=x.useState({});return e.jsx(e.Fragment,{children:e.jsxs(B,{gutter:[24,0],children:[e.jsx(r,{span:24,children:e.jsx(d,{orientation:"left",children:"基本信息"})}),e.jsx(r,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,children:e.jsx(c,{name:"cate_id",label:"一级风格",placeholder:"请选择一级风格",fieldProps:{showSearch:!0,optionFilterProp:"label"},request:async()=>{const t=await U.getList({pageSize:1e3,type:2}),m=t.data.data.map(l=>({label:l.cate_name,value:l.id})),i={};return t.data.data.forEach(l=>{i[l.id]=l.cate_name}),j(i),m},rules:[{required:!0,message:"请选择一级风格"}]})}),e.jsx(r,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,children:e.jsx(z,{name:["cate_id"],children:({cate_id:t})=>{const m=h[t]||"",i=(H[m]||[]).map(l=>({label:l,value:l}));return e.jsx(c,{name:"style_name",label:"二级风格",placeholder:t?"请选择二级风格":"请先选择一级风格",disabled:!t,options:i,rules:[{required:!0,message:"请选择二级风格"}],fieldProps:{showSearch:!0,optionFilterProp:"label"}})}})}),e.jsx(r,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,children:e.jsx(O,{name:"descript",label:"AI提示词",placeholder:"请输入英文提示词，如：Studio Ghibli watercolor style, soft colors, warm lighting",fieldProps:{rows:3,showCount:!0,maxLength:500},rules:[{required:!0,message:"请输入AI提示词"}]})}),e.jsx(r,{span:24,children:e.jsx(d,{orientation:"left",children:"AI模型配置"})}),e.jsx(r,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,children:e.jsx(c,{name:"style_type",label:"风格类型",placeholder:"请选择风格类型",tooltip:"知名风格：模型已训练，只需提示词；定制风格：需要参考图教模型",initialValue:1,options:[{label:"知名风格（吉卜力、迪士尼等）",value:1},{label:"定制风格（需参考图）",value:2}],rules:[{required:!0,message:"请选择风格类型"}]})}),e.jsx(r,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,children:e.jsx(c,{name:"model",label:"AI模型",placeholder:"请选择模型",tooltip:"选择用于生成图片的AI模型",initialValue:"seedream_4_5",options:[{label:"Seedream 4.5 (默认)",value:"seedream_4_5"},{label:"Seedream 4.0",value:"seedream_4_0"}],rules:[{required:!0,message:"请选择模型"}]})}),e.jsx(r,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,children:e.jsx(f,{name:"style_strength",label:"风格强度",placeholder:"0.1 - 1.0",initialValue:.7,min:.1,max:1,step:.1,tooltip:"参考图对生成结果的影响程度 (0.1-1.0)",fieldProps:{precision:1,style:{width:"100%"}}})}),e.jsx(r,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,children:e.jsx(f,{name:"identity_strength",label:"身份保持强度",placeholder:"0.1 - 1.0",initialValue:.8,min:.1,max:1,step:.1,tooltip:"照片相似度保持程度 (0.1-1.0)",fieldProps:{precision:1,style:{width:"100%"}}})}),e.jsx(r,{span:24,children:e.jsx(d,{orientation:"left",children:"图片配置"})}),e.jsx(r,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,children:e.jsx(v.Item,{name:"style_img",label:"前端展示图 (1张)",tooltip:"用于小程序风格选择列表展示，建议正方形",rules:[{required:!0,message:"请上传展示图"}],children:e.jsx(k,{})})}),e.jsx(r,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,children:e.jsx(v.Item,{name:"reference_images",label:"AI参考图 (3-4张)",tooltip:"AI生成时参考这些图片的风格，建议3-4张同风格图片",rules:[{required:!0,message:"请上传至少1张参考图"}],children:e.jsx(Y,{maxCount:5})})}),e.jsx(r,{span:24,children:e.jsx(d,{orientation:"left",children:"其他设置"})}),e.jsx(r,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,children:e.jsx(f,{name:"sort",label:"排序",placeholder:"请输入",initialValue:0,fieldProps:{precision:0,style:{width:"100%"}},min:0,extra:"数值越大，排序越靠前",rules:[{required:!1,message:"请输入"}]})}),e.jsx(r,{xs:24,sm:24,md:12,lg:12,xl:12,xxl:12,children:e.jsx(G,{name:"status",label:"状态",extra:"",checkedChildren:"显示",unCheckedChildren:"隐藏",checked:!0})})]})})};export{Je as default};
