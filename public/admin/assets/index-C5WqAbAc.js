import{A as b,v as A,R,E as T,r as u,e as _,j as e,x as E}from"./index-BTXTJVKt.js";import{S as M}from"./index-B1B7dhZb.js";import{I as O}from"./index-DZ2tAw4A.js";import{F as $}from"./Table-ButWyQXY.js";import{T as C}from"./index-DWyRM-jO.js";import{R as I}from"./Input-CJszbmX7.js";import{M as N}from"./index-1Ew_B_KM.js";import"./gapSize-U1swVQyS.js";import"./getAllowClear-SV9Asyat.js";import"./TextArea-Dm9DBQS4.js";import"./styleChecker-xca8e-q0.js";import"./addEventListener-BQxGY-6f.js";import"./Overflow-DodMVMUF.js";import"./iconUtil-0otcsGdb.js";import"./index-D1w3VCkm.js";import"./PurePanel-BJ0dSvru.js";import"./move-BiL2XrK1.js";import"./CheckOutlined-CRheHqkM.js";import"./DownOutlined-dHMiLU6h.js";import"./index-Ci-Y97rG.js";import"./index-Clo_9DB7.js";import"./dropdown-ozNz9IXP.js";import"./LeftOutlined-CNJksXTb.js";import"./Dropdown-D-FCcTPI.js";import"./index-D2NRD51k.js";import"./EllipsisOutlined-BzWcE7tF.js";import"./Sider-clMwekzu.js";import"./useBreakpoint-C9P5ZgXD.js";import"./index-DwWsiyHK.js";import"./index-B9ywFgu1.js";import"./HolderOutlined-DO80hp-F.js";import"./CaretDownOutlined-BWLnnrSk.js";import"./BaseForm-Bt-x2uS5.js";import"./CopyOutlined-Bqo58qRo.js";import"./DeleteOutlined-sMe1csST.js";import"./row-DJNm5-9Y.js";import"./PlusOutlined-DhDAnJdR.js";import"./index-CsweGtVO.js";import"./index-JJDTxIwy.js";const{Search:L}=O,j=(p,d=null,l="")=>{let a=E(p),r=[];return a.forEach(s=>{if(s.pid_name===d){s.pid_path_title=`${l}${l?"-":""}${s.title}`;let m=j(a,s.name,s.pid_path_title);s.children=m,r.push(s)}}),r},z=(p,d)=>{let l="";return p&&p.some(a=>{const r=d.find(s=>s.name==a);return r.path&&r.is_params==1&&(l=r.path),!!(r.path&&r.is_params==1)}),l},Ft=({placement:p="top"})=>{const{message:d}=b.useApp(),l=A(),[a]=R(T),[r,s]=u.useState(!1),[m,S]=u.useState([]),[w,h]=u.useState([]);u.useEffect(()=>{r&&m.length==0&&v()},[r]);const v=async()=>{let i=j(a.menu.filter(o=>o.hidden==1)),t=[];const F=o=>{o.desc&&(o.title=`${o.title}[${o.desc}]`),t.push(o)},x=o=>{o.map(n=>{if(n.title!="只浏览数据"){const g=z(n.pid_name_path,a.menu);g&&F({id:n.id,title:n.pid_path_title,desc:n==null?void 0:n.desc,url:g})}if(n.children&&n.children.length>0)return x(n.children)})};x(i),S(t),h(t)},[c,y]=u.useState(""),{run:f}=_(i=>{y(i),h(i?m.filter(t=>t.title.includes(i)):m)},{wait:500});return e.jsx(e.Fragment,{children:e.jsx(N,{open:r,onOpenChange:i=>{s(i)},title:"搜索菜单功能",width:600,submitter:!1,trigger:e.jsx("div",{className:"item",children:e.jsx(C,{title:"搜索功能",placement:p,children:e.jsx("span",{className:"circle",children:e.jsx(I,{className:"icon"})})})}),children:e.jsxs(M,{direction:"vertical",style:{width:"100%"},size:24,children:[e.jsx(L,{placeholder:"请输入...",onChange:i=>{f(i.target.value)},onSearch:f}),e.jsx($,{bordered:!1,dataSource:w,showHeader:!1,style:{cursor:"pointer"},rowKey:"id",columns:[{dataIndex:"title",key:"title",title:"菜单名称",render:(i,t)=>c&&t.title.indexOf(c)>-1?e.jsxs(e.Fragment,{children:[t.title.substr(0,t.title.indexOf(c)),e.jsx("span",{style:{color:"red"},children:c}),t.title.substr(t.title.indexOf(c)+c.length)]}):t.title}],size:"small",scroll:{y:500},pagination:!1,onRow:i=>({onClick:t=>{s(!1),l(i.url)}})})]})})})};export{Ft as default};
