import{f as F,r as h,A as $t,j as T,B as ht}from"./index-CxoETvRH.js";import{u as At}from"./index-BRQSMwEB.js";import{R as Gt,C as mt}from"./row-qzGwq4Dr.js";import{I as Zt}from"./index-4oTavk15.js";import{S as yt}from"./index-BphrQzO9.js";import{R as zt}from"./CloseCircleOutlined-CAc-dvjt.js";import{M as Ft}from"./index-BOtvnYjU.js";import{A as Bt}from"./index-BnwvW9ps.js";import{S as Dt}from"./addEventListener-DSaIWks1.js";import"./index-DsYJmDxZ.js";import"./index-DPelJOqh.js";import"./index-CvzSf1Bg.js";import"./BaseForm-Ce_dWbWI.js";import"./index-C-0gitmI.js";import"./CopyOutlined-DoMFKUVx.js";import"./DeleteOutlined-CBiNWy3g.js";import"./PlusOutlined-vk23tUE5.js";import"./index-C_bV-DnG.js";import"./DownOutlined-CKTuMrT9.js";import"./index-Bcl-gWmM.js";import"./Input-DBs5aIW3.js";import"./getAllowClear-61dfOySQ.js";import"./iconUtil-CrL5XMUw.js";import"./index-BbWS0DN_.js";import"./Overflow-C1Gv4RUW.js";import"./PurePanel-Qn0-6z3A.js";import"./LeftOutlined-CXR1ue2q.js";import"./index-BCcQRwwP.js";import"./index-BiKlR4w8.js";import"./progress-Ofxp_QxA.js";import"./CheckOutlined-DNlRZmOM.js";import"./move-BEwii-fV.js";import"./index-r-JVz4Yx.js";import"./index-BZDhPRiF.js";import"./useBreakpoint-9N_aLd03.js";import"./index-LJrl3qH-.js";import"./TextArea-B06lod9y.js";import"./gapSize-U1swVQyS.js";var Lt=F.createContext(void 0),Mt=function(e,n){h.useEffect(function(){if(e){var i={};return Object.keys(n).forEach(function(l){if(l.indexOf("on")===0){var p=l.slice(2).toLowerCase(),d=n[l];typeof d=="function"&&(i[p]=d)}}),Object.keys(i).forEach(function(l){e.on(l,i[l])}),function(){Object.keys(i).forEach(function(l){e.on(l,i[l])})}}},[e])},vt=function(e,n){var i={};return Object.keys(n).forEach(function(l){switch(e){case"marker":i[l]=new TMap.MarkerStyle(n[l]);break;case"label":i[l]=new TMap.LabelStyle(n[l]);break;case"polyline":i[l]=new TMap.PolylineStyle(n[l]);break;case"polygon":i[l]=new TMap.PolygonStyle(n[l]);break}}),i};function Q(t){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(t)}var Ht=["position"];function Kt(t,e){return qt(t)||Ut(t,e)||Wt(t,e)||Vt()}function Vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wt(t,e){if(t){if(typeof t=="string")return gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(t,e)}}function gt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ut(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,l,p,d,y=[],m=!0,g=!1;try{if(p=(n=n.call(t)).next,e!==0)for(;!(m=(i=p.call(n)).done)&&(y.push(i.value),y.length!==e);m=!0);}catch(S){g=!0,l=S}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(g)throw l}}return y}}function qt(t){if(Array.isArray(t))return t}function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bt(Object(n),!0).forEach(function(i){Yt(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yt(t,e,n){return e=Qt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qt(t){var e=Jt(t,"string");return Q(e)=="symbol"?e:String(e)}function Jt(t,e){if(Q(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Q(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xt(t,e){if(t==null)return{};var n=te(t,e),i,l;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(t);for(l=0;l<p.length;l++)i=p[l],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function te(t,e){if(t==null)return{};var n={},i=Object.keys(t),l,p;for(p=0;p<i.length;p++)l=i[p],!(e.indexOf(l)>=0)&&(n[l]=t[l]);return n}var Ot=function(e){return e.map(function(n){n.position;var i=Xt(n,Ht);return wt(wt({},i),{},{position:new TMap.LatLng(n.position.lat,n.position.lng)})})},ee=F.forwardRef(function(t,e){var n=t.id,i=t.styles,l=i===void 0?{}:i,p=t.geometries,d=p===void 0?[]:p,y=t.options,m=y===void 0?{}:y,g=m.zIndex,S=m.enableCollision,I=m.collisionOptions,G=m.minZoom,_=m.maxZoom,k=h.useContext(Lt),v=h.useState(),E=Kt(v,2),w=E[0],j=E[1],C=function(){if(k){var x=new TMap.MultiMarker({id:n,map:k,zIndex:g,styles:vt("marker",l),enableCollision:S,collisionOptions:I,geometries:Ot(d),minZoom:G,maxZoom:_});j(x)}};return h.useEffect(function(){return w||C(),function(){w==null||w.setMap(null)}},[k,w]),Mt(w,t),h.useImperativeHandle(e,function(){return w},[w]),h.useEffect(function(){w==null||w.setStyles(vt("marker",l))},[l]),h.useEffect(function(){w==null||w.setGeometries(Ot(d))},[d]),null});function et(t){"@babel/helpers - typeof";return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(t)}function re(t,e){return ae(t)||ie(t,e)||oe(t,e)||ne()}function ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oe(t,e){if(t){if(typeof t=="string")return Tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tt(t,e)}}function Tt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,l,p,d,y=[],m=!0,g=!1;try{if(p=(n=n.call(t)).next,e!==0)for(;!(m=(i=p.call(n)).done)&&(y.push(i.value),y.length!==e);m=!0);}catch(S){g=!0,l=S}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(g)throw l}}return y}}function ae(t){if(Array.isArray(t))return t}function J(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */J=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,l=Object.defineProperty||function(a,r,o){a[r]=o.value},p=typeof Symbol=="function"?Symbol:{},d=p.iterator||"@@iterator",y=p.asyncIterator||"@@asyncIterator",m=p.toStringTag||"@@toStringTag";function g(a,r,o){return Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}),a[r]}try{g({},"")}catch{g=function(o,u,f){return o[u]=f}}function S(a,r,o,u){var f=r&&r.prototype instanceof w?r:w,c=Object.create(f.prototype),b=new D(u||[]);return l(c,"_invoke",{value:W(a,o,b)}),c}function I(a,r,o){try{return{type:"normal",arg:a.call(r,o)}}catch(u){return{type:"throw",arg:u}}}e.wrap=S;var G="suspendedStart",_="suspendedYield",k="executing",v="completed",E={};function w(){}function j(){}function C(){}var O={};g(O,d,function(){return this});var x=Object.getPrototypeOf,R=x&&x(x(V([])));R&&R!==n&&i.call(R,d)&&(O=R);var Z=C.prototype=w.prototype=Object.create(O);function H(a){["next","throw","return"].forEach(function(r){g(a,r,function(o){return this._invoke(r,o)})})}function B(a,r){function o(f,c,b,L){var M=I(a[f],a,c);if(M.type!=="throw"){var A=M.arg,P=A.value;return P&&et(P)=="object"&&i.call(P,"__await")?r.resolve(P.__await).then(function(z){o("next",z,b,L)},function(z){o("throw",z,b,L)}):r.resolve(P).then(function(z){A.value=z,b(A)},function(z){return o("throw",z,b,L)})}L(M.arg)}var u;l(this,"_invoke",{value:function(c,b){function L(){return new r(function(M,A){o(c,b,M,A)})}return u=u?u.then(L,L):L()}})}function W(a,r,o){var u=G;return function(f,c){if(u===k)throw new Error("Generator is already running");if(u===v){if(f==="throw")throw c;return{value:t,done:!0}}for(o.method=f,o.arg=c;;){var b=o.delegate;if(b){var L=U(b,o);if(L){if(L===E)continue;return L}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(u===G)throw u=v,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);u=k;var M=I(a,r,o);if(M.type==="normal"){if(u=o.done?v:_,M.arg===E)continue;return{value:M.arg,done:o.done}}M.type==="throw"&&(u=v,o.method="throw",o.arg=M.arg)}}}function U(a,r){var o=r.method,u=a.iterator[o];if(u===t)return r.delegate=null,o==="throw"&&a.iterator.return&&(r.method="return",r.arg=t,U(a,r),r.method==="throw")||o!=="return"&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),E;var f=I(u,a.iterator,r.arg);if(f.type==="throw")return r.method="throw",r.arg=f.arg,r.delegate=null,E;var c=f.arg;return c?c.done?(r[a.resultName]=c.value,r.next=a.nextLoc,r.method!=="return"&&(r.method="next",r.arg=t),r.delegate=null,E):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function q(a){var r={tryLoc:a[0]};1 in a&&(r.catchLoc=a[1]),2 in a&&(r.finallyLoc=a[2],r.afterLoc=a[3]),this.tryEntries.push(r)}function K(a){var r=a.completion||{};r.type="normal",delete r.arg,a.completion=r}function D(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(q,this),this.reset(!0)}function V(a){if(a||a===""){var r=a[d];if(r)return r.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length)){var o=-1,u=function f(){for(;++o<a.length;)if(i.call(a,o))return f.value=a[o],f.done=!1,f;return f.value=t,f.done=!0,f};return u.next=u}}throw new TypeError(et(a)+" is not iterable")}return j.prototype=C,l(Z,"constructor",{value:C,configurable:!0}),l(C,"constructor",{value:j,configurable:!0}),j.displayName=g(C,m,"GeneratorFunction"),e.isGeneratorFunction=function(a){var r=typeof a=="function"&&a.constructor;return!!r&&(r===j||(r.displayName||r.name)==="GeneratorFunction")},e.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,C):(a.__proto__=C,g(a,m,"GeneratorFunction")),a.prototype=Object.create(Z),a},e.awrap=function(a){return{__await:a}},H(B.prototype),g(B.prototype,y,function(){return this}),e.AsyncIterator=B,e.async=function(a,r,o,u,f){f===void 0&&(f=Promise);var c=new B(S(a,r,o,u),f);return e.isGeneratorFunction(r)?c:c.next().then(function(b){return b.done?b.value:c.next()})},H(Z),g(Z,m,"Generator"),g(Z,d,function(){return this}),g(Z,"toString",function(){return"[object Generator]"}),e.keys=function(a){var r=Object(a),o=[];for(var u in r)o.push(u);return o.reverse(),function f(){for(;o.length;){var c=o.pop();if(c in r)return f.value=c,f.done=!1,f}return f.done=!0,f}},e.values=V,D.prototype={constructor:D,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(K),!r)for(var o in this)o.charAt(0)==="t"&&i.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function(){this.done=!0;var r=this.tryEntries[0].completion;if(r.type==="throw")throw r.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var o=this;function u(A,P){return b.type="throw",b.arg=r,o.next=A,P&&(o.method="next",o.arg=t),!!P}for(var f=this.tryEntries.length-1;f>=0;--f){var c=this.tryEntries[f],b=c.completion;if(c.tryLoc==="root")return u("end");if(c.tryLoc<=this.prev){var L=i.call(c,"catchLoc"),M=i.call(c,"finallyLoc");if(L&&M){if(this.prev<c.catchLoc)return u(c.catchLoc,!0);if(this.prev<c.finallyLoc)return u(c.finallyLoc)}else if(L){if(this.prev<c.catchLoc)return u(c.catchLoc,!0)}else{if(!M)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return u(c.finallyLoc)}}}},abrupt:function(r,o){for(var u=this.tryEntries.length-1;u>=0;--u){var f=this.tryEntries[u];if(f.tryLoc<=this.prev&&i.call(f,"finallyLoc")&&this.prev<f.finallyLoc){var c=f;break}}c&&(r==="break"||r==="continue")&&c.tryLoc<=o&&o<=c.finallyLoc&&(c=null);var b=c?c.completion:{};return b.type=r,b.arg=o,c?(this.method="next",this.next=c.finallyLoc,E):this.complete(b)},complete:function(r,o){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&o&&(this.next=o),E},finish:function(r){for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o];if(u.finallyLoc===r)return this.complete(u.completion,u.afterLoc),K(u),E}},catch:function(r){for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o];if(u.tryLoc===r){var f=u.completion;if(f.type==="throw"){var c=f.arg;K(u)}return c}}throw new Error("illegal catch attempt")},delegateYield:function(r,o,u){return this.delegate={iterator:V(r),resultName:o,nextLoc:u},this.method==="next"&&(this.arg=t),E}},e}function St(t,e,n,i,l,p,d){try{var y=t[p](d),m=y.value}catch(g){n(g);return}y.done?e(m):Promise.resolve(m).then(i,l)}function xt(t){return function(){var e=this,n=arguments;return new Promise(function(i,l){var p=t.apply(e,n);function d(m){St(p,i,l,d,y,"next",m)}function y(m){St(p,i,l,d,y,"throw",m)}d(void 0)})}}var Y,_t=[],le=function(){var t=xt(J().mark(function e(n,i){return J().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",new Promise(function(d){if(window.TMap){d(!0);return}_t.push(d),window.initGLMap||(window.initGLMap=function(){_t.forEach(function(y){y(!0)})}),Y||(Y=document.createElement("script"),Y.type="text/javascript",Y.src=i?"https://map.qq.com/api/gljs?v=1.exp&key=".concat(n,"&libraries=").concat(i,"&callback=initGLMap"):"https://map.qq.com/api/gljs?v=1.exp&key=".concat(n,"&callback=initGLMap"),document.body.appendChild(Y))}));case 1:case"end":return p.stop()}},e)}));return function(n,i){return t.apply(this,arguments)}}(),Et=function(e,n,i){var l={scale:"scale",zoom:"zoom",rotation:"rotation"},p={topLeft:TMap.constants.CONTROL_POSITION.TOP_LEFT,topCenter:TMap.constants.CONTROL_POSITION.TOP_CENTER,topRight:TMap.constants.CONTROL_POSITION.TOP_RIGHT,centerLeft:TMap.constants.CONTROL_POSITION.CENTER_LEFT,center:TMap.constants.CONTROL_POSITION.CENTER,centerRight:TMap.constants.CONTROL_POSITION.CENTER_RIGHT,bottomLeft:TMap.constants.CONTROL_POSITION.BOTTOM_LEFT,bottomCenter:TMap.constants.CONTROL_POSITION.BOTTOM_CENTER,bottomRight:TMap.constants.CONTROL_POSITION.BOTTOM_RIGHT};if(e){if(!n){Object.keys(l).forEach(function(d){return e.removeControl(l[d])});return}Object.keys(l).forEach(function(d){var y=e.getControl(l[d]);if(y.map||e.addControl(y),i){i[d]||e.removeControl(l[d]);var m=i[d]||{},g=m.position,S=m.className,I=m.numVisible;g&&y.setPosition(p[g]),S&&y.setClassName(S),d==="zoom"&&y.setNumVisible(!!I)}})}},se=F.forwardRef(function(t,e){var n=t.apiKey,i=n===void 0?"":n,l=t.libraries,p=l===void 0?"visualization,geometry,tools":l,d=t.className,y=d===void 0?"tmap-container":d,m=t.style,g=m===void 0?{height:"100%",width:"100%"}:m,S=t.control,I=S===void 0?void 0:S,G=t.duration,_=G===void 0?500:G,k=t.options,v=k===void 0?{}:k,E=t.children,w=v.center,j=w===void 0?{lat:40.0404,lng:116.2735}:w,C=v.zoom,O=C===void 0?12:C,x=v.minZoom,R=x===void 0?3:x,Z=v.maxZoom,H=Z===void 0?20:Z,B=v.rotation,W=B===void 0?0:B,U=v.pitch,q=U===void 0?0:U,K=v.scale,D=K===void 0?1:K,V=v.offset,a=V===void 0?{x:0,y:0}:V,r=v.draggable,o=r===void 0?!0:r,u=v.scrollable,f=u===void 0?!0:u,c=v.pitchable,b=c===void 0?!0:c,L=v.rotatable,M=L===void 0?!0:L,A=v.doubleClickZoom,P=A===void 0?!0:A,z=v.mapZoomType,at=v.boundary,N=at===void 0?void 0:at,jt=v.mapStyleId,lt=v.baseMap,rt=lt===void 0?{type:"vector"}:lt,st=v.viewMode,nt=st===void 0?"3D":st,ut=v.showControl,X=ut===void 0?!0:ut,Ct=v.renderOptions,It=v.clip,kt=h.useState(),ct=re(kt,2),s=ct[0],Pt=ct[1],ot=h.useRef(null),ft=!1,Rt=function(){var tt=xt(J().mark(function pt(){var dt,it;return J().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.prev=0,$.next=3,le(i,p);case 3:dt=$.sent,dt&&ot.current&&!ft&&(it=new TMap.Map(ot.current,{center:new TMap.LatLng(j.lat,j.lng),zoom:O,minZoom:R,maxZoom:H,rotation:W,pitch:q,scale:D,offset:a,draggable:o,scrollable:f,pitchable:b,rotatable:M,doubleClickZoom:P,mapZoomType:z,boundary:N?new TMap.LatLngBounds(new TMap.LatLng(N.sw.lat,N.sw.lng),new TMap.LatLng(N.ne.lat,N.ne.lng)):void 0,mapStyleId:jt,baseMap:rt,viewMode:nt,showControl:X,renderOptions:Ct,clip:It}),ft=!0,Pt(it),Et(it,X,I)),$.next=10;break;case 7:$.prev=7,$.t0=$.catch(0),console.error($.t0);case 10:case"end":return $.stop()}},pt,null,[[0,7]])}));return function(){return tt.apply(this,arguments)}}();h.useEffect(function(){return s||Rt(),function(){return s==null?void 0:s.destroy()}},[]),Mt(s,t),h.useImperativeHandle(e,function(){return s},[s]),h.useEffect(function(){s==null||s.panTo(new TMap.LatLng(j.lat,j.lng),{duration:_})},[j]),h.useEffect(function(){s==null||s.zoomTo(O,{duration:_})},[O]),h.useEffect(function(){s==null||s.setMinZoom(R)},[R]),h.useEffect(function(){s==null||s.setMaxZoom(H)},[H]),h.useEffect(function(){s==null||s.rotateTo(W,{duration:_})},[W]),h.useEffect(function(){s==null||s.pitchTo(q,{duration:_})},[q]),h.useEffect(function(){s==null||s.setScale(D)},[D]),h.useEffect(function(){s==null||s.setOffset(a)},[a]),h.useEffect(function(){s==null||s.setDraggable(o)},[o]),h.useEffect(function(){s==null||s.setScrollable(f)},[f]),h.useEffect(function(){s==null||s.setPitchable(b)},[b]),h.useEffect(function(){s==null||s.setRotatable(M)},[M]),h.useEffect(function(){s==null||s.setDoubleClickZoom(P)},[P]),h.useEffect(function(){N&&(s==null||s.setBoundary(new TMap.LatLngBounds(new TMap.LatLng(N.sw.lat,N.sw.lng),new TMap.LatLng(N.ne.lat,N.ne.lng))))},[N]),h.useEffect(function(){s==null||s.setBaseMap(rt)},[rt]),h.useEffect(function(){s==null||s.setViewMode(nt)},[nt]),h.useEffect(function(){s&&Et(s,X,I)},[X,I]);var Nt=h.useMemo(function(){return F.Children.map(E,function(tt){if(s&&F.isValidElement(tt))return F.cloneElement(tt)})},[s,E]);return F.createElement(Lt.Provider,{value:s},F.createElement("div",{ref:ot,className:y,style:g},Nt))});const Ue=({value:t,onChange:e})=>{const n=h.useRef(),i=h.useRef(),{message:l}=$t.useApp(),[p,d]=h.useState(null),[y,m]=h.useState([]),[g,S]=h.useState(!1),[I,G]=h.useState(null),[_,k]=h.useState({lat:t?t.split(",")[0]:29.552703,lng:t?t.split(",")[1]:106.549358}),[v,E]=h.useState([]);h.useEffect(()=>{_.lat&&_.lng&&E([{styleId:"multiMarkerStyle1",position:{lat:_.lat,lng:_.lng}}])},[_]);const w=()=>{if(!_)return l.error("请点击地图选择位置~"),!1;e(`${_.lat},${_.lng}`),S(!1)},j=()=>{if(!p)return!1;let O=I;O||(O=new TMap.service.Suggestion({pageSize:20,regionFix:!1}),G(O)),O.getSuggestions({keyword:p}).then(x=>{var R;(R=x.data)!=null&&R.length?m(x.data):l.error("没有相关信息！")}).catch(x=>{l.error(x.message)})},C=O=>{y.some(x=>{if(x.id==O)return k({lat:x.location.lat,lng:x.location.lng}),!0})};return At(()=>{j()},[p],{wait:1e3}),T.jsxs(T.Fragment,{children:[T.jsxs(Gt,{gutter:[10,0],children:[T.jsx(mt,{flex:"auto",style:{flex:1},children:T.jsx(Zt,{value:t,disabled:!0,placeholder:"请选择位置",allowClear:!0})}),T.jsx(mt,{flex:"none",children:T.jsxs(yt,{children:[t?T.jsx(T.Fragment,{children:T.jsx(ht,{type:"dashed",icon:T.jsx(zt,{}),onClick:()=>e("")})}):"",T.jsx(ht,{onClick:()=>S(!0),children:"选择位置"})]})})]}),T.jsx(Ft,{open:g,title:"选择位置",width:800,onOk:w,onCancel:()=>S(!1),children:T.jsxs(yt,{direction:"vertical",style:{width:"100%"},size:"middle",children:[T.jsx(Bt,{message:"直接点击地图，设置位置~",type:"info","show-icon":!0}),T.jsx("div",{className:"rowSearch",children:T.jsx(Dt,{showSearch:!0,allowClear:!0,value:p,placeholder:"请输入地址搜索",style:{width:"100%"},filterOption:!1,onSearch:d,onChange:C,options:y,fieldNames:{label:"title",value:"id"}})}),T.jsx(se,{ref:n,apiKey:"UBCBZ-MLQL4-PKWUD-DNVHI-TQPMH-CGFU3",control:{zoom:{position:"topRight",numVisible:!0}},libraries:"service",options:{center:_,zoom:14,showControl:!0},onClick:O=>{k({lat:O.latLng.lat,lng:O.latLng.lng})},children:T.jsx(ee,{ref:i,styles:{multiMarkerStyle1:{width:30,height:45,anchor:{x:15,y:45}}},geometries:v,onClick:O=>{}})})]})})]})};export{Ue as default};
