const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DVWn-CLq.js","assets/index-BTXTJVKt.js","assets/index-4ObyrmBg.css","assets/adminMenu-Hr-Zrko8.js","assets/PlusOutlined-DhDAnJdR.js","assets/index-1Ew_B_KM.js","assets/BaseForm-Bt-x2uS5.js","assets/index-DwWsiyHK.js","assets/index-DWyRM-jO.js","assets/CopyOutlined-Bqo58qRo.js","assets/DeleteOutlined-sMe1csST.js","assets/row-DJNm5-9Y.js","assets/useBreakpoint-C9P5ZgXD.js","assets/index-CsweGtVO.js","assets/index-JJDTxIwy.js","assets/PurePanel-BJ0dSvru.js","assets/index-a7d1SIoy.js","assets/index-D_n6I86r.js","assets/index-Ck2b4VHc.js","assets/index-B1B7dhZb.js","assets/gapSize-U1swVQyS.js","assets/index-BaexhYUL.js","assets/DownOutlined-dHMiLU6h.js","assets/index-CBjIPB84.js","assets/index-DWwHrh8G.js"])))=>i.map(i=>d[i]);
import{R as O,l as T,A as z,u as F,r,m as M,j as e,B as D,L as _,S as B,_ as b}from"./index-BTXTJVKt.js";import{a as A}from"./adminMenu-Hr-Zrko8.js";import{R as N,C as R}from"./row-DJNm5-9Y.js";import{C as v}from"./index-CM2B2jkZ.js";import{S as f}from"./index-B1B7dhZb.js";import{I as U}from"./index-DZ2tAw4A.js";import{T as V}from"./index-B9ywFgu1.js";import{P as $}from"./index-Dnt0D-Vv.js";import{R as q}from"./DeleteOutlined-sMe1csST.js";import{A as G}from"./index-C1LhiznF.js";import{R as H}from"./EditOutlined-Jb-cOsu8.js";import{P as J}from"./index-C1Zz-ieJ.js";import"./useBreakpoint-C9P5ZgXD.js";import"./index-CHGWkdWj.js";import"./EllipsisOutlined-BzWcE7tF.js";import"./Overflow-DodMVMUF.js";import"./index-DWyRM-jO.js";import"./PlusOutlined-DhDAnJdR.js";import"./Dropdown-D-FCcTPI.js";import"./getAllowClear-SV9Asyat.js";import"./gapSize-U1swVQyS.js";import"./Input-CJszbmX7.js";import"./TextArea-Dm9DBQS4.js";import"./iconUtil-0otcsGdb.js";import"./index-D1w3VCkm.js";import"./HolderOutlined-DO80hp-F.js";import"./index-CBjIPB84.js";import"./index-DwWsiyHK.js";import"./index-lhHkabfZ.js";import"./index-D5nMW6Hn.js";import"./DownOutlined-dHMiLU6h.js";import"./dropdown-ozNz9IXP.js";import"./LeftOutlined-CNJksXTb.js";import"./PurePanel-BJ0dSvru.js";import"./index-D2NRD51k.js";import"./Sider-clMwekzu.js";import"./move-BiL2XrK1.js";const{Search:Q}=U,W=r.lazy(()=>b(()=>import("./index-DVWn-CLq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),X=r.lazy(()=>b(()=>import("./index-a7d1SIoy.js"),__vite__mapDeps([16,1,2,3,17,6,7,8,9,10,11,12,4,13,18,19,20,21,22,23,24]))),g=(a,l)=>{let d;for(let n=0;n<l.length;n++){const s=l[n];s.children&&(s.children.some(x=>x.id===a)?d=s.id:g(a,s.children)&&(d=g(a,s.children)))}return d},Te=()=>{const[a]=O(T),{message:l}=z.useApp();F(()=>{p()});const[d,n]=r.useState([]),[s,x]=r.useState(""),[C,j]=r.useState(!0),E=t=>{if(x(t.target.value),!t.target.value)return n([]),!1;const o=I.map(i=>i.title.indexOf(t.target.value)>-1?g(i.id,c):null).filter((i,u,w)=>i&&w.indexOf(i)===u);n(o),j(!0)},L=t=>{n(t),j(!1)},[c,P]=r.useState([]),[I,K]=r.useState([]),p=()=>{A.getList({hidden:"all"}).then(t=>{if(t.code===1){const o=t.data.map(i=>({...i}));K(o),P(M(o))}})},[h,y]=r.useState([]),[m,S]=r.useState([]),k=()=>{A.delete({id:m}).then(t=>{t.code===1?(l.success(t.message),p(),S([])):l.error(t.message)})};return e.jsx(e.Fragment,{children:e.jsx(J,{className:"sa-page-container",ghost:!0,header:{title:"权限节点",subTitle:"非技术人员请不要做任何改动，否则将会导致系统瘫痪~",style:{padding:"0 24px 12px"}},children:e.jsxs(N,{children:[e.jsx(R,{xs:24,md:12,lg:8,xl:8,xxl:8,style:{marginBottom:"12px",paddingRight:a.isMobile===!1?"12px":"0px"},children:e.jsx(v,{variant:"borderless",title:"权限节点",extra:e.jsx(e.Fragment,{children:e.jsxs(f,{children:[e.jsx(D,{danger:!0,size:"small",disabled:!(m.length>0),children:e.jsxs($,{title:"确定要删除吗?",icon:e.jsx(q,{}),onConfirm:k,children:["删除(",m.length,")"]})}),e.jsx(_,{block:!1,children:e.jsx(W,{menuList:c,getList:p})})]})}),children:e.jsxs(f,{direction:"vertical",style:{width:"100%"},size:"large",children:[e.jsx(Q,{onChange:E,placeholder:"搜索..."}),e.jsx(V,{checkable:!0,blockNode:!0,treeData:c,height:700,fieldNames:{key:"id"},autoExpandParent:C,checkedKeys:m,checkStrictly:!1,selectedKeys:h,expandedKeys:d,onExpand:L,onSelect:y,onCheck:S,titleRender:({title:t,name:o,id:i,hidden:u})=>t.indexOf(s)>-1?e.jsxs("div",{style:{opacity:u==1?1:.6},children:[e.jsx("span",{children:t.substr(0,t.indexOf(s))}),e.jsx("span",{style:{color:"red"},children:s}),e.jsxs("span",{children:[t.substr(t.indexOf(s)+s.length),"[",o,"]"]})]}):e.jsxs("span",{children:[t,"[",o,"]"]})})]})})}),e.jsx(R,{xs:24,md:12,lg:16,xl:16,xxl:16,children:e.jsx(v,{variant:"borderless",title:e.jsxs(e.Fragment,{children:[e.jsx(H,{})," ",e.jsx("span",{children:"编辑节点"})]}),children:h.length>0?e.jsx(e.Fragment,{children:e.jsx(_,{children:e.jsx(X,{updateId:h,menuList:c,getList:p,setUpdateId:y})})}):e.jsx(e.Fragment,{children:e.jsxs(f,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsx(G,{message:"请点击权限节点名称，然后进行编辑",type:"info",showIcon:!0}),e.jsx(B,{})]})})})})]})})})};export{Te as default};
