import{A as b,v as A,R,E as T,r as u,e as _,j as e,x as E}from"./index-CxoETvRH.js";import{S as M}from"./index-BphrQzO9.js";import{I as O}from"./index-4oTavk15.js";import{F as $}from"./Table-dye4hUJ0.js";import{T as C}from"./index-C-0gitmI.js";import{R as I}from"./Input-DBs5aIW3.js";import{M as N}from"./index-B6rUILzb.js";import"./gapSize-U1swVQyS.js";import"./getAllowClear-61dfOySQ.js";import"./TextArea-B06lod9y.js";import"./styleChecker-BWYb9pEX.js";import"./addEventListener-DSaIWks1.js";import"./Overflow-C1Gv4RUW.js";import"./iconUtil-CrL5XMUw.js";import"./index-BbWS0DN_.js";import"./PurePanel-Qn0-6z3A.js";import"./move-BEwii-fV.js";import"./CheckOutlined-DNlRZmOM.js";import"./DownOutlined-CKTuMrT9.js";import"./index-BCcQRwwP.js";import"./index-D0fE36s2.js";import"./dropdown-0heBmOdg.js";import"./LeftOutlined-CXR1ue2q.js";import"./Dropdown-B_0_MLsu.js";import"./index-27J4tOGW.js";import"./EllipsisOutlined-DYRNvKIw.js";import"./Sider-DIX9tLFZ.js";import"./useBreakpoint-9N_aLd03.js";import"./index-DPelJOqh.js";import"./index-DRn2fARs.js";import"./HolderOutlined-c3sLJRZN.js";import"./CaretDownOutlined-Cm7GLJFD.js";import"./BaseForm-Ce_dWbWI.js";import"./CopyOutlined-DoMFKUVx.js";import"./DeleteOutlined-CBiNWy3g.js";import"./row-qzGwq4Dr.js";import"./PlusOutlined-vk23tUE5.js";import"./index-C_bV-DnG.js";import"./index-BOtvnYjU.js";const{Search:L}=O,j=(p,d=null,l="")=>{let a=E(p),r=[];return a.forEach(s=>{if(s.pid_name===d){s.pid_path_title=`${l}${l?"-":""}${s.title}`;let m=j(a,s.name,s.pid_path_title);s.children=m,r.push(s)}}),r},z=(p,d)=>{let l="";return p&&p.some(a=>{const r=d.find(s=>s.name==a);return r.path&&r.is_params==1&&(l=r.path),!!(r.path&&r.is_params==1)}),l},Ft=({placement:p="top"})=>{const{message:d}=b.useApp(),l=A(),[a]=R(T),[r,s]=u.useState(!1),[m,S]=u.useState([]),[w,h]=u.useState([]);u.useEffect(()=>{r&&m.length==0&&v()},[r]);const v=async()=>{let i=j(a.menu.filter(o=>o.hidden==1)),t=[];const F=o=>{o.desc&&(o.title=`${o.title}[${o.desc}]`),t.push(o)},x=o=>{o.map(n=>{if(n.title!="只浏览数据"){const g=z(n.pid_name_path,a.menu);g&&F({id:n.id,title:n.pid_path_title,desc:n==null?void 0:n.desc,url:g})}if(n.children&&n.children.length>0)return x(n.children)})};x(i),S(t),h(t)},[c,y]=u.useState(""),{run:f}=_(i=>{y(i),h(i?m.filter(t=>t.title.includes(i)):m)},{wait:500});return e.jsx(e.Fragment,{children:e.jsx(N,{open:r,onOpenChange:i=>{s(i)},title:"搜索菜单功能",width:600,submitter:!1,trigger:e.jsx("div",{className:"item",children:e.jsx(C,{title:"搜索功能",placement:p,children:e.jsx("span",{className:"circle",children:e.jsx(I,{className:"icon"})})})}),children:e.jsxs(M,{direction:"vertical",style:{width:"100%"},size:24,children:[e.jsx(L,{placeholder:"请输入...",onChange:i=>{f(i.target.value)},onSearch:f}),e.jsx($,{bordered:!1,dataSource:w,showHeader:!1,style:{cursor:"pointer"},rowKey:"id",columns:[{dataIndex:"title",key:"title",title:"菜单名称",render:(i,t)=>c&&t.title.indexOf(c)>-1?e.jsxs(e.Fragment,{children:[t.title.substr(0,t.title.indexOf(c)),e.jsx("span",{style:{color:"red"},children:c}),t.title.substr(t.title.indexOf(c)+c.length)]}):t.title}],size:"small",scroll:{y:500},pagination:!1,onRow:i=>({onClick:t=>{s(!1),l(i.url)}})})]})})})};export{Ft as default};
