import{r as p,I as S,d as I,A as R,j as e,N as d,B as n,a as i}from"./index-ZI51y314.js";import{c as f}from"./config-BeGkAHGl.js";import{P as z}from"./Table-B6v6YKM6.js";import{S as A}from"./index-DFWIh5En.js";import{R as y}from"./PlusOutlined-BrSmXzHo.js";import{T as w}from"./progress-DyKaNkG9.js";import{P as L}from"./index-0LiqU0NK.js";import{P as k}from"./index-DdgniWrL.js";import"./ProCard-CQJ5thSX.js";import"./index-Cn0WBpt6.js";import"./index-BQOafed3.js";import"./index-BIgUuT9u.js";import"./useBreakpoint-LlaO7o8U.js";import"./row-CA0HzO8K.js";import"./index-DuZOyzfN.js";import"./EllipsisOutlined-rOnf-sW7.js";import"./Overflow-6EGZ5_au.js";import"./Dropdown-D-H8baFE.js";import"./index-Cqf3aS8y.js";import"./index-ClH-H18i.js";import"./BaseForm-Dt9roNn_.js";import"./CopyOutlined-Di_ABAcP.js";import"./DeleteOutlined-BJQ6Ec5G.js";import"./index-DPgpDBVC.js";import"./index-Dm2ANYsS.js";import"./DownOutlined-BvFNYu2h.js";import"./index-DxRnNHO_.js";import"./index-Cl5zAUSu.js";import"./index-B_vyTJVd.js";import"./addEventListener-2k7hxYrj.js";import"./iconUtil-snskxn8a.js";import"./index-C4Es4GTO.js";import"./PurePanel-IzJJVpwi.js";import"./getAllowClear-Bb8ihI2F.js";import"./move-D1aXciBO.js";import"./CheckOutlined-BH5QPYjn.js";import"./Input-YyHXjDeB.js";import"./index-B94rXkjj.js";import"./index-CzgBx6dd.js";import"./TextArea-CbhGwHw0.js";import"./LeftOutlined-DLD2DGED.js";import"./index-D32vO3So.js";import"./index-CJ6fB5dR.js";import"./index-Bo_cWNs1.js";import"./Table-DRKnGQZA.js";import"./styleChecker-nFJfeipz.js";import"./index-DbzUeGO6.js";import"./dropdown-CBTinjep.js";import"./index-YSn64RDr.js";import"./Sider-BPr4VxAy.js";import"./index-BWfJjs86.js";import"./HolderOutlined-51iibq6a.js";import"./CaretDownOutlined-902wn7sG.js";import"./index-AV8iSHwq.js";import"./index-CqBDmXPg.js";import"./index-lhHkabfZ.js";import"./index-DWBnXa5p.js";import"./index-DujqzdOS.js";import"./index-rQeGZp6R.js";import"./index-Ig2XVJMn.js";import"./EditOutlined-C2XE2Of8.js";import"./gapSize-U1swVQyS.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},O=function(a,m){return p.createElement(S,I({},a,{ref:m,icon:H}))},P=p.forwardRef(O);const Ee=()=>{const{message:s}=R.useApp(),a=p.useRef(),m=p.useRef(),h=()=>{a.current.reload(),a.current.clearSelected()},[u,g]=p.useState([]),j=()=>{f.updateSort({list:u}).then(r=>{r.code===1?(s.success(r.message),h(),g([]),getList()):s.error(r.message)})},v=(r,t)=>{let o=[...u];o.some(c=>{if(c.id===r)return c.sort=t,!0})||o.push({id:r,sort:t}),g(o)},b=r=>{f.delete({id:r}).then(t=>{t.code===1?(s.success(t.message),h()):s.error(t.message)})},C=[{title:"配置名称",dataIndex:"title",search:!1},{title:"描述",dataIndex:"description",ellipsis:!0},{title:"配置名称",dataIndex:"name",search:!1,copyable:!0,render:(r,t)=>r},{title:"类型",dataIndex:"type",search:!1},{title:"排序",dataIndex:"sort",search:!1,render:(r,t)=>e.jsx(e.Fragment,{children:e.jsx(w,{defaultValue:t.sort,style:{width:"100px"},min:0,disabled:i("configUpdateSort"),onChange:o=>{v(t.id,o)}})})},{title:"操作",dataIndex:"action",search:!1,render:(r,t)=>e.jsxs(e.Fragment,{children:[e.jsx(d,{to:i("configUpdate")?"":`/config/create?id=${t.id}&type=${t.type}`,children:e.jsx(n,{type:"link",size:"small",disabled:i("configUpdate"),children:"修改"})}),e.jsx(L,{title:"确认要删除吗？",onConfirm:()=>{b(t.id)},disabled:i("configDelete"),children:e.jsx(n,{type:"link",size:"small",danger:!0,disabled:i("configDelete"),children:"删除"})})]})}];return e.jsx(e.Fragment,{children:e.jsx(k,{className:"sa-page-container",ghost:!0,header:{title:"其它设置",style:{padding:"0px 24px 12px"}},children:e.jsx(z,{actionRef:a,formRef:m,rowKey:"id",columns:C,scroll:{x:800},search:!1,options:{fullScreen:!0},columnsState:{persistenceKey:"table_column_Config",persistenceType:"localStorage"},headerTitle:e.jsxs(A,{children:[e.jsx(d,{to:i("configCreate")?"":"/config/create?type=form",children:e.jsx(n,{type:"primary",disabled:i("configCreate"),icon:e.jsx(y,{}),children:"添加Form设置"})}),e.jsx(d,{to:i("configCreate")?"":"/config/create?type=list",children:e.jsx(n,{type:"primary",disabled:i("configCreate"),icon:e.jsx(y,{}),children:"添加List设置"})}),e.jsx(n,{type:"primary",onClick:j,disabled:i("configUpdateSort"),icon:e.jsx(P,{}),children:"保存排序"})]}),pagination:!1,request:async(r={},t,o)=>{let l="";for(let x in t)l=x+" "+(t[x]==="descend"?"desc":"asc");const c=await f.getList({...r,orderBy:l,page:r.current});return{data:c.data,success:!0,total:c.data.length}}})})})};export{Ee as default};
