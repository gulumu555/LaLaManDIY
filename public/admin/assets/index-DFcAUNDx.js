import{r as h,I as k,d as L,C as w,v as R,j as t,D as y,R as j,l as C,E as T,y as I,x as A,B as $,F as O}from"./index-CxoETvRH.js";import{c as E}from"./contentTabs-Dr9ireWK.js";import{L as S}from"./index-189KvslM.js";import{T as _}from"./index-CVyj0YhM.js";import{D as z}from"./index-D0fE36s2.js";import{R as B}from"./DownOutlined-CKTuMrT9.js";import{R as P}from"./CloseCircleOutlined-CAc-dvjt.js";import"./Sider-DIX9tLFZ.js";import"./LeftOutlined-CXR1ue2q.js";import"./EllipsisOutlined-DYRNvKIw.js";import"./Overflow-C1Gv4RUW.js";import"./index-C-0gitmI.js";import"./PlusOutlined-vk23tUE5.js";import"./Dropdown-B_0_MLsu.js";import"./dropdown-0heBmOdg.js";import"./PurePanel-Qn0-6z3A.js";import"./index-27J4tOGW.js";import"./move-BEwii-fV.js";import"./index-BphrQzO9.js";import"./gapSize-U1swVQyS.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},D=function(e,o){return h.createElement(k,L({},e,{ref:o,icon:H}))},F=h.forwardRef(D),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},G=function(e,o){return h.createElement(k,L({},e,{ref:o,icon:M}))},K=h.forwardRef(G);const{useToken:V}=w,q=({title:u,name:e,close:o,path:c,closePage:m,activeName:p,...N})=>{const{token:v}=V(),d=R();return t.jsxs("div",{className:`tabs-pane-btn ${p===e?"on":""}`,style:p===e?{background:v.colorPrimary}:{},onClick:()=>{d(c)},children:[t.jsx("span",{children:u}),o?t.jsx(t.Fragment,{children:t.jsx("span",{className:"icon",onClick:x=>{m(e),x.stopPropagation()},children:t.jsx(y,{style:{marginRight:"0px",marginLeft:"5px"}})})}):""]})},{Header:J}=S,Q=(u,e)=>{let o;return e.some(c=>{if(c.name===u)return c.pid_name_path.some(m=>{if(o=e.find(p=>p.name===m&&p.path!==""),o)return!0}),!0}),o},de=()=>{const[u]=j(C),[e,o]=j(E),[c]=j(T),m=I(),p=R(),[N,v]=h.useState([]),d=r=>{let a=[],n=!1,i=e.activeName;r==="left"&&e.list.some(s=>{s.close===!0&&n===!1&&s.name!==e.activeName||a.push(s),s.name===e.activeName&&(n=!0)}),r==="right"&&e.list.some(s=>{(n===!1||s.name===e.activeName)&&a.push(s),s.name===e.activeName&&(n=!0)}),r==="other"&&e.list.some(s=>{s.close===!0&&s.name!==e.activeName||a.push(s)}),r==="all"&&e.list.some(s=>{s.close===!0||(p(s.path),i=s.name,a.push(s))}),o(s=>({...s,activeName:i,list:a}))};h.useEffect(()=>{var n;if(!m.pathname)return;const r=c.menuArrAll.find(i=>m.pathname.toLowerCase()==i.path.toLowerCase());if(!r)return;const a=Q(r.name,c.menuArrAll);if(a){let i=A(e.list);e.list.some(l=>l.name===a.name)===!1&&i.push({name:a.name,title:a.title,path:a.path,keepAlive:[a.name],close:a.path!=="/index"});let b;i.some((l,f)=>{if(l.name===a.name)return b=f,i[f].path=`${m.pathname}${m.search}`,!1});let g=[];i[b].keepAlive=[],(n=c.menuArrAll.find(l=>l.name===r.name).pid_name_path)==null||n.some(l=>{c.menuArrAll.some(f=>{if(l===f.name)return f.name&&(i[b].keepAlive.push(f.name),g.push(f.name)),!0})}),e.keepAlive.map(l=>{g.indexOf(l)}),o(l=>({...l,keepAlive:g,activeName:a.name,list:i}))}},[m]);const x=r=>{let a=e.activeName;r===e.activeName&&e.list.some((n,i)=>{if(n.name===r)return a=e.list[i-1].name,p(e.list[i-1].path),!0}),o(n=>({...n,activeName:a,list:e.list.filter(i=>i.name!=r)}))};return h.useEffect(()=>{let r=[];e.list.map(a=>{let n=A(a);r.push({...n,key:n.name,label:t.jsx(q,{title:n.title,name:n.name,close:n.close,path:n.path,closePage:x,activeName:e.activeName})})}),v(r)},[e.list]),t.jsx(t.Fragment,{children:t.jsxs(J,{className:"sa-tabs",style:{height:u.antdThemeValue=="compact"?36:44},children:[t.jsx("div",{className:"tabs-l",children:t.jsx(_,{activeKey:null,tabBarGutter:10,size:"small",items:N})}),t.jsx("div",{className:"tabs-r",children:t.jsx(z,{menu:{items:[{key:"1",label:t.jsx("span",{children:"关闭左侧"}),icon:t.jsx(F,{className:"tabs-r-icon"}),onClick:()=>d("left")},{key:"2",label:t.jsx("span",{children:"关闭右侧"}),icon:t.jsx(K,{className:"tabs-r-icon"}),onClick:()=>d("right")},{key:"3",label:t.jsx("span",{children:"关闭其它"}),icon:t.jsx(P,{className:"tabs-r-icon"}),onClick:()=>d("other")},{key:"4",label:t.jsx("span",{children:"全部关闭"}),icon:t.jsx(O,{className:"tabs-r-icon"}),onClick:()=>d("all")}]},children:t.jsx("div",{className:"span",children:t.jsx($,{className:"btn",size:"small",icon:t.jsx(B,{style:{fontSize:"12px"}})})})})})]})})};export{de as default};
