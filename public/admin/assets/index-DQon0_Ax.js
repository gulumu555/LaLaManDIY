const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CZElMJ4L.js","assets/index-CxoETvRH.js","assets/index-4ObyrmBg.css","assets/adminMenu-CI_NMbuZ.js","assets/PlusOutlined-vk23tUE5.js","assets/index-B6rUILzb.js","assets/BaseForm-Ce_dWbWI.js","assets/index-DPelJOqh.js","assets/index-C-0gitmI.js","assets/CopyOutlined-DoMFKUVx.js","assets/DeleteOutlined-CBiNWy3g.js","assets/row-qzGwq4Dr.js","assets/useBreakpoint-9N_aLd03.js","assets/index-C_bV-DnG.js","assets/index-BOtvnYjU.js","assets/PurePanel-Qn0-6z3A.js","assets/index-D-MmhLYh.js","assets/index-BV5Zm_mO.js","assets/index-JNVvr94D.js","assets/index-BphrQzO9.js","assets/gapSize-U1swVQyS.js","assets/index-CvzSf1Bg.js","assets/DownOutlined-CKTuMrT9.js","assets/index-Bcl-gWmM.js","assets/index-CVCROCWL.js"])))=>i.map(i=>d[i]);
import{R as O,l as T,A as z,u as F,r,m as M,j as e,B as D,L as _,S as B,_ as b}from"./index-CxoETvRH.js";import{a as A}from"./adminMenu-CI_NMbuZ.js";import{R as N,C as R}from"./row-qzGwq4Dr.js";import{C as v}from"./index-BLklr69N.js";import{S as f}from"./index-BphrQzO9.js";import{I as U}from"./index-4oTavk15.js";import{T as V}from"./index-DRn2fARs.js";import{P as $}from"./index-0Umo49A8.js";import{R as q}from"./DeleteOutlined-CBiNWy3g.js";import{A as G}from"./index-BnwvW9ps.js";import{R as H}from"./EditOutlined-DSBmrQxq.js";import{P as J}from"./index-CKDIzB68.js";import"./useBreakpoint-9N_aLd03.js";import"./index-CVyj0YhM.js";import"./EllipsisOutlined-DYRNvKIw.js";import"./Overflow-C1Gv4RUW.js";import"./index-C-0gitmI.js";import"./PlusOutlined-vk23tUE5.js";import"./Dropdown-B_0_MLsu.js";import"./getAllowClear-61dfOySQ.js";import"./gapSize-U1swVQyS.js";import"./Input-DBs5aIW3.js";import"./TextArea-B06lod9y.js";import"./iconUtil-CrL5XMUw.js";import"./index-BbWS0DN_.js";import"./HolderOutlined-c3sLJRZN.js";import"./index-Bcl-gWmM.js";import"./index-DPelJOqh.js";import"./index-lhHkabfZ.js";import"./index-BZDhPRiF.js";import"./DownOutlined-CKTuMrT9.js";import"./dropdown-0heBmOdg.js";import"./LeftOutlined-CXR1ue2q.js";import"./PurePanel-Qn0-6z3A.js";import"./index-27J4tOGW.js";import"./Sider-DIX9tLFZ.js";import"./move-BEwii-fV.js";const{Search:Q}=U,W=r.lazy(()=>b(()=>import("./index-CZElMJ4L.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),X=r.lazy(()=>b(()=>import("./index-D-MmhLYh.js"),__vite__mapDeps([16,1,2,3,17,6,7,8,9,10,11,12,4,13,18,19,20,21,22,23,24]))),g=(a,l)=>{let d;for(let n=0;n<l.length;n++){const s=l[n];s.children&&(s.children.some(x=>x.id===a)?d=s.id:g(a,s.children)&&(d=g(a,s.children)))}return d},Te=()=>{const[a]=O(T),{message:l}=z.useApp();F(()=>{p()});const[d,n]=r.useState([]),[s,x]=r.useState(""),[C,j]=r.useState(!0),E=t=>{if(x(t.target.value),!t.target.value)return n([]),!1;const o=I.map(i=>i.title.indexOf(t.target.value)>-1?g(i.id,c):null).filter((i,u,w)=>i&&w.indexOf(i)===u);n(o),j(!0)},L=t=>{n(t),j(!1)},[c,P]=r.useState([]),[I,K]=r.useState([]),p=()=>{A.getList({hidden:"all"}).then(t=>{if(t.code===1){const o=t.data.map(i=>({...i}));K(o),P(M(o))}})},[h,y]=r.useState([]),[m,S]=r.useState([]),k=()=>{A.delete({id:m}).then(t=>{t.code===1?(l.success(t.message),p(),S([])):l.error(t.message)})};return e.jsx(e.Fragment,{children:e.jsx(J,{className:"sa-page-container",ghost:!0,header:{title:"权限节点",subTitle:"非技术人员请不要做任何改动，否则将会导致系统瘫痪~",style:{padding:"0 24px 12px"}},children:e.jsxs(N,{children:[e.jsx(R,{xs:24,md:12,lg:8,xl:8,xxl:8,style:{marginBottom:"12px",paddingRight:a.isMobile===!1?"12px":"0px"},children:e.jsx(v,{variant:"borderless",title:"权限节点",extra:e.jsx(e.Fragment,{children:e.jsxs(f,{children:[e.jsx(D,{danger:!0,size:"small",disabled:!(m.length>0),children:e.jsxs($,{title:"确定要删除吗?",icon:e.jsx(q,{}),onConfirm:k,children:["删除(",m.length,")"]})}),e.jsx(_,{block:!1,children:e.jsx(W,{menuList:c,getList:p})})]})}),children:e.jsxs(f,{direction:"vertical",style:{width:"100%"},size:"large",children:[e.jsx(Q,{onChange:E,placeholder:"搜索..."}),e.jsx(V,{checkable:!0,blockNode:!0,treeData:c,height:700,fieldNames:{key:"id"},autoExpandParent:C,checkedKeys:m,checkStrictly:!1,selectedKeys:h,expandedKeys:d,onExpand:L,onSelect:y,onCheck:S,titleRender:({title:t,name:o,id:i,hidden:u})=>t.indexOf(s)>-1?e.jsxs("div",{style:{opacity:u==1?1:.6},children:[e.jsx("span",{children:t.substr(0,t.indexOf(s))}),e.jsx("span",{style:{color:"red"},children:s}),e.jsxs("span",{children:[t.substr(t.indexOf(s)+s.length),"[",o,"]"]})]}):e.jsxs("span",{children:[t,"[",o,"]"]})})]})})}),e.jsx(R,{xs:24,md:12,lg:16,xl:16,xxl:16,children:e.jsx(v,{variant:"borderless",title:e.jsxs(e.Fragment,{children:[e.jsx(H,{})," ",e.jsx("span",{children:"编辑节点"})]}),children:h.length>0?e.jsx(e.Fragment,{children:e.jsx(_,{children:e.jsx(X,{updateId:h,menuList:c,getList:p,setUpdateId:y})})}):e.jsx(e.Fragment,{children:e.jsxs(f,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsx(G,{message:"请点击权限节点名称，然后进行编辑",type:"info",showIcon:!0}),e.jsx(B,{})]})})})})]})})})};export{Te as default};
