import{A as b,v as A,R,E as T,r as u,e as _,j as e,x as E}from"./index-ZI51y314.js";import{S as M}from"./index-DFWIh5En.js";import{I as O}from"./index-CzgBx6dd.js";import{F as $}from"./Table-DRKnGQZA.js";import{T as C}from"./index-BIgUuT9u.js";import{R as I}from"./Input-YyHXjDeB.js";import{M as N}from"./index-DujqzdOS.js";import"./gapSize-U1swVQyS.js";import"./getAllowClear-Bb8ihI2F.js";import"./TextArea-CbhGwHw0.js";import"./styleChecker-nFJfeipz.js";import"./addEventListener-2k7hxYrj.js";import"./Overflow-6EGZ5_au.js";import"./iconUtil-snskxn8a.js";import"./index-C4Es4GTO.js";import"./PurePanel-IzJJVpwi.js";import"./move-D1aXciBO.js";import"./CheckOutlined-BH5QPYjn.js";import"./DownOutlined-BvFNYu2h.js";import"./index-B94rXkjj.js";import"./index-DbzUeGO6.js";import"./dropdown-CBTinjep.js";import"./LeftOutlined-DLD2DGED.js";import"./Dropdown-D-H8baFE.js";import"./index-YSn64RDr.js";import"./EllipsisOutlined-rOnf-sW7.js";import"./Sider-BPr4VxAy.js";import"./useBreakpoint-LlaO7o8U.js";import"./index-BQOafed3.js";import"./index-BWfJjs86.js";import"./HolderOutlined-51iibq6a.js";import"./CaretDownOutlined-902wn7sG.js";import"./BaseForm-Dt9roNn_.js";import"./CopyOutlined-Di_ABAcP.js";import"./DeleteOutlined-BJQ6Ec5G.js";import"./row-CA0HzO8K.js";import"./PlusOutlined-BrSmXzHo.js";import"./index-DPgpDBVC.js";import"./index-rQeGZp6R.js";const{Search:L}=O,j=(p,d=null,l="")=>{let a=E(p),r=[];return a.forEach(s=>{if(s.pid_name===d){s.pid_path_title=`${l}${l?"-":""}${s.title}`;let m=j(a,s.name,s.pid_path_title);s.children=m,r.push(s)}}),r},z=(p,d)=>{let l="";return p&&p.some(a=>{const r=d.find(s=>s.name==a);return r.path&&r.is_params==1&&(l=r.path),!!(r.path&&r.is_params==1)}),l},Ft=({placement:p="top"})=>{const{message:d}=b.useApp(),l=A(),[a]=R(T),[r,s]=u.useState(!1),[m,S]=u.useState([]),[w,h]=u.useState([]);u.useEffect(()=>{r&&m.length==0&&v()},[r]);const v=async()=>{let i=j(a.menu.filter(o=>o.hidden==1)),t=[];const F=o=>{o.desc&&(o.title=`${o.title}[${o.desc}]`),t.push(o)},x=o=>{o.map(n=>{if(n.title!="只浏览数据"){const g=z(n.pid_name_path,a.menu);g&&F({id:n.id,title:n.pid_path_title,desc:n==null?void 0:n.desc,url:g})}if(n.children&&n.children.length>0)return x(n.children)})};x(i),S(t),h(t)},[c,y]=u.useState(""),{run:f}=_(i=>{y(i),h(i?m.filter(t=>t.title.includes(i)):m)},{wait:500});return e.jsx(e.Fragment,{children:e.jsx(N,{open:r,onOpenChange:i=>{s(i)},title:"搜索菜单功能",width:600,submitter:!1,trigger:e.jsx("div",{className:"item",children:e.jsx(C,{title:"搜索功能",placement:p,children:e.jsx("span",{className:"circle",children:e.jsx(I,{className:"icon"})})})}),children:e.jsxs(M,{direction:"vertical",style:{width:"100%"},size:24,children:[e.jsx(L,{placeholder:"请输入...",onChange:i=>{f(i.target.value)},onSearch:f}),e.jsx($,{bordered:!1,dataSource:w,showHeader:!1,style:{cursor:"pointer"},rowKey:"id",columns:[{dataIndex:"title",key:"title",title:"菜单名称",render:(i,t)=>c&&t.title.indexOf(c)>-1?e.jsxs(e.Fragment,{children:[t.title.substr(0,t.title.indexOf(c)),e.jsx("span",{style:{color:"red"},children:c}),t.title.substr(t.title.indexOf(c)+c.length)]}):t.title}],size:"small",scroll:{y:500},pagination:!1,onRow:i=>({onClick:t=>{s(!1),l(i.url)}})})]})})})};export{Ft as default};
