import{r as p,I as S,d as I,A as R,j as e,N as d,B as n,a as i}from"./index-BTXTJVKt.js";import{c as f}from"./config-C4847YkZ.js";import{P as z}from"./Table-CUXyCVLs.js";import{S as A}from"./index-B1B7dhZb.js";import{R as y}from"./PlusOutlined-DhDAnJdR.js";import{T as w}from"./progress-C-smal5r.js";import{P as L}from"./index-Dnt0D-Vv.js";import{P as k}from"./index-C1Zz-ieJ.js";import"./ProCard-BTx7yLUQ.js";import"./index-Ck2b4VHc.js";import"./index-DwWsiyHK.js";import"./index-DWyRM-jO.js";import"./useBreakpoint-C9P5ZgXD.js";import"./row-DJNm5-9Y.js";import"./index-CHGWkdWj.js";import"./EllipsisOutlined-BzWcE7tF.js";import"./Overflow-DodMVMUF.js";import"./Dropdown-D-FCcTPI.js";import"./index-DWwHrh8G.js";import"./index-D_n6I86r.js";import"./BaseForm-Bt-x2uS5.js";import"./CopyOutlined-Bqo58qRo.js";import"./DeleteOutlined-sMe1csST.js";import"./index-CsweGtVO.js";import"./index-BaexhYUL.js";import"./DownOutlined-dHMiLU6h.js";import"./index-CBjIPB84.js";import"./index-ZV6Sdybn.js";import"./index-Cpu1JcVa.js";import"./addEventListener-BQxGY-6f.js";import"./iconUtil-0otcsGdb.js";import"./index-D1w3VCkm.js";import"./PurePanel-BJ0dSvru.js";import"./getAllowClear-SV9Asyat.js";import"./move-BiL2XrK1.js";import"./CheckOutlined-CRheHqkM.js";import"./Input-CJszbmX7.js";import"./index-Ci-Y97rG.js";import"./index-DZ2tAw4A.js";import"./TextArea-Dm9DBQS4.js";import"./LeftOutlined-CNJksXTb.js";import"./index-Wn9_u9d6.js";import"./index-BfhOKpHw.js";import"./index-D5nMW6Hn.js";import"./Table-ButWyQXY.js";import"./styleChecker-xca8e-q0.js";import"./index-Clo_9DB7.js";import"./dropdown-ozNz9IXP.js";import"./index-D2NRD51k.js";import"./Sider-clMwekzu.js";import"./index-B9ywFgu1.js";import"./HolderOutlined-DO80hp-F.js";import"./CaretDownOutlined-BWLnnrSk.js";import"./index-DiR_3Q38.js";import"./index-hKAX5Tgp.js";import"./index-lhHkabfZ.js";import"./index-CcMUfAok.js";import"./index-1Ew_B_KM.js";import"./index-JJDTxIwy.js";import"./index-Dx9hPCiE.js";import"./EditOutlined-Jb-cOsu8.js";import"./gapSize-U1swVQyS.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},O=function(a,m){return p.createElement(S,I({},a,{ref:m,icon:H}))},P=p.forwardRef(O);const Ee=()=>{const{message:s}=R.useApp(),a=p.useRef(),m=p.useRef(),h=()=>{a.current.reload(),a.current.clearSelected()},[u,g]=p.useState([]),j=()=>{f.updateSort({list:u}).then(r=>{r.code===1?(s.success(r.message),h(),g([]),getList()):s.error(r.message)})},v=(r,t)=>{let o=[...u];o.some(c=>{if(c.id===r)return c.sort=t,!0})||o.push({id:r,sort:t}),g(o)},b=r=>{f.delete({id:r}).then(t=>{t.code===1?(s.success(t.message),h()):s.error(t.message)})},C=[{title:"配置名称",dataIndex:"title",search:!1},{title:"描述",dataIndex:"description",ellipsis:!0},{title:"配置名称",dataIndex:"name",search:!1,copyable:!0,render:(r,t)=>r},{title:"类型",dataIndex:"type",search:!1},{title:"排序",dataIndex:"sort",search:!1,render:(r,t)=>e.jsx(e.Fragment,{children:e.jsx(w,{defaultValue:t.sort,style:{width:"100px"},min:0,disabled:i("configUpdateSort"),onChange:o=>{v(t.id,o)}})})},{title:"操作",dataIndex:"action",search:!1,render:(r,t)=>e.jsxs(e.Fragment,{children:[e.jsx(d,{to:i("configUpdate")?"":`/config/create?id=${t.id}&type=${t.type}`,children:e.jsx(n,{type:"link",size:"small",disabled:i("configUpdate"),children:"修改"})}),e.jsx(L,{title:"确认要删除吗？",onConfirm:()=>{b(t.id)},disabled:i("configDelete"),children:e.jsx(n,{type:"link",size:"small",danger:!0,disabled:i("configDelete"),children:"删除"})})]})}];return e.jsx(e.Fragment,{children:e.jsx(k,{className:"sa-page-container",ghost:!0,header:{title:"其它设置",style:{padding:"0px 24px 12px"}},children:e.jsx(z,{actionRef:a,formRef:m,rowKey:"id",columns:C,scroll:{x:800},search:!1,options:{fullScreen:!0},columnsState:{persistenceKey:"table_column_Config",persistenceType:"localStorage"},headerTitle:e.jsxs(A,{children:[e.jsx(d,{to:i("configCreate")?"":"/config/create?type=form",children:e.jsx(n,{type:"primary",disabled:i("configCreate"),icon:e.jsx(y,{}),children:"添加Form设置"})}),e.jsx(d,{to:i("configCreate")?"":"/config/create?type=list",children:e.jsx(n,{type:"primary",disabled:i("configCreate"),icon:e.jsx(y,{}),children:"添加List设置"})}),e.jsx(n,{type:"primary",onClick:j,disabled:i("configUpdateSort"),icon:e.jsx(P,{}),children:"保存排序"})]}),pagination:!1,request:async(r={},t,o)=>{let l="";for(let x in t)l=x+" "+(t[x]==="descend"?"desc":"asc");const c=await f.getList({...r,orderBy:l,page:r.current});return{data:c.data,success:!0,total:c.data.length}}})})})};export{Ee as default};
