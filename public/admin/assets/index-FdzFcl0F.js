const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DB7KO1kd.js","assets/index-BTXTJVKt.js","assets/index-4ObyrmBg.css","assets/index-DwWsiyHK.js"])))=>i.map(i=>d[i]);
import{r as s,I as j,d as v,A as P,j as e,B as f,L as _,S as A,_ as R}from"./index-BTXTJVKt.js";import{c as u}from"./config-C4847YkZ.js";import{P as x}from"./ProCard-BTx7yLUQ.js";import{S as h}from"./index-B1B7dhZb.js";import{T as g}from"./index-DWyRM-jO.js";import{A as L}from"./index-C1LhiznF.js";import{B as b}from"./index-DiR_3Q38.js";import{P as O}from"./index-D_n6I86r.js";import{P as z}from"./index-C1Zz-ieJ.js";import"./index-Ck2b4VHc.js";import"./index-DwWsiyHK.js";import"./useBreakpoint-C9P5ZgXD.js";import"./row-DJNm5-9Y.js";import"./index-CHGWkdWj.js";import"./EllipsisOutlined-BzWcE7tF.js";import"./Overflow-DodMVMUF.js";import"./PlusOutlined-DhDAnJdR.js";import"./Dropdown-D-FCcTPI.js";import"./gapSize-U1swVQyS.js";import"./index-BaexhYUL.js";import"./BaseForm-Bt-x2uS5.js";import"./CopyOutlined-Bqo58qRo.js";import"./DeleteOutlined-sMe1csST.js";import"./index-CsweGtVO.js";import"./DownOutlined-dHMiLU6h.js";import"./index-CBjIPB84.js";import"./index-Cpu1JcVa.js";import"./addEventListener-BQxGY-6f.js";import"./iconUtil-0otcsGdb.js";import"./index-D1w3VCkm.js";import"./PurePanel-BJ0dSvru.js";import"./getAllowClear-SV9Asyat.js";import"./move-BiL2XrK1.js";import"./CheckOutlined-CRheHqkM.js";import"./Input-CJszbmX7.js";import"./index-Ci-Y97rG.js";import"./index-DZ2tAw4A.js";import"./TextArea-Dm9DBQS4.js";import"./LeftOutlined-CNJksXTb.js";import"./index-Wn9_u9d6.js";import"./progress-C-smal5r.js";import"./index-BfhOKpHw.js";import"./index-D5nMW6Hn.js";import"./index-hKAX5Tgp.js";import"./index-lhHkabfZ.js";import"./index-CcMUfAok.js";import"./index-1Ew_B_KM.js";import"./index-JJDTxIwy.js";import"./index-DWwHrh8G.js";import"./dropdown-ozNz9IXP.js";import"./index-D2NRD51k.js";import"./Sider-clMwekzu.js";var B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},F=function(m,a){return s.createElement(j,v({},m,{ref:a,icon:B}))},C=s.forwardRef(F),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},E=function(m,a){return s.createElement(j,v({},m,{ref:a,icon:D}))},I=s.forwardRef(E);const S=s.lazy(()=>R(()=>import("./index-DB7KO1kd.js"),__vite__mapDeps([0,1,2,3]))),Ie=({name:l,...m})=>{const{message:a}=P.useApp(),w=s.useRef(),[r,y]=s.useState(!1);s.useEffect(()=>{if(!l)return!1;u.findData({name:l}).then(t=>{t.code===1?(t.data.type==="list"&&(t.data.fields_config[0].fieldProps={itemContainerRender:i=>e.jsx(O.Group,{children:i}),max:t.data.list_number,itemRender:({listDom:i,action:n},o)=>e.jsx(x,{size:"small",bordered:!0,hoverable:!0,extra:e.jsx(e.Fragment,{children:e.jsxs(h,{children:[e.jsx(g,{title:"上移",children:e.jsx(f,{type:"link",size:"small",disabled:o.index===0,onClick:()=>{o.operation.move(o.index,o.index-1)},children:e.jsx(I,{})})}),e.jsx(g,{title:"下移",children:e.jsx(f,{type:"link",size:"small",onClick:()=>{o.operation.move(o.index,o.index+1)},children:e.jsx(C,{})})}),n]})}),title:`第 ${o.index+1} 行`,style:{marginBottom:8},children:i})},t.data.content={content:t.data.content}),y(t.data)):a.error(t.message)})},[l]);const d=(t,i)=>{let n=i??null;return!n&&["digitRange","dateRange","dateTimeRange","timerang","checkbox","uploadImgAll"].indexOf(t.valueType)!==-1&&(n=[]),!n&&t.valueType==="select"&&["multiple","tags"].indexOf(t.fieldProps.mode)!==-1&&(n=[]),n};return e.jsx(e.Fragment,{children:e.jsx(z,{className:"sa-page-container",ghost:!0,header:{title:(r==null?void 0:r.title)||"",style:{padding:"0px 24px 12px"}},children:e.jsx(x,{children:e.jsx(h,{direction:"vertical",size:"middle",style:{width:"100%"},children:r!==!1?e.jsxs(e.Fragment,{children:[r.description?e.jsx(L,{message:r.description,type:"info",showIcon:!0}):"",e.jsx(_,{children:e.jsx(S,{children:e.jsx(b,{initialValues:r.content,formRef:w,columns:r.fields_config,submitter:{resetButtonProps:{style:{display:"none"}}},grid:r.type==="form",colProps:{xl:6,lg:8,md:12,sm:24,xs:24},rowProps:{gutter:[24,0]},isKeyPressSubmit:!0,layoutType:"Form",onFinish:async t=>{let i={};r.type==="form"&&r.fields_config.map(o=>{i[o.name]=d(o,t[o.name])}),r.type==="list"&&(i=[],t.content.map((o,p)=>{i[p]={},r.fields_config[0].columns.map(c=>{i[p][c.name]=d(c,t.content[p][c.name])})}));const n=await u.updateContent({id:r.id,content:i});n.code===1?a.success(n.message):a.error(n.message)}},r.id)})})]}):e.jsx(e.Fragment,{children:e.jsx(A,{})})})})})})};export{Ie as default};
