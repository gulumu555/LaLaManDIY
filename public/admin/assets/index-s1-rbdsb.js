import{r as p,I as S,d as I,A as R,j as e,N as d,B as n,a as i}from"./index-CxoETvRH.js";import{c as f}from"./config-Cbfhm-dN.js";import{P as z}from"./Table-MBA0ODj2.js";import{S as A}from"./index-BphrQzO9.js";import{R as y}from"./PlusOutlined-vk23tUE5.js";import{T as w}from"./progress-Ofxp_QxA.js";import{P as L}from"./index-0Umo49A8.js";import{P as k}from"./index-CKDIzB68.js";import"./ProCard-D6QkQ_g5.js";import"./index-JNVvr94D.js";import"./index-DPelJOqh.js";import"./index-C-0gitmI.js";import"./useBreakpoint-9N_aLd03.js";import"./row-qzGwq4Dr.js";import"./index-CVyj0YhM.js";import"./EllipsisOutlined-DYRNvKIw.js";import"./Overflow-C1Gv4RUW.js";import"./Dropdown-B_0_MLsu.js";import"./index-CVCROCWL.js";import"./index-BV5Zm_mO.js";import"./BaseForm-Ce_dWbWI.js";import"./CopyOutlined-DoMFKUVx.js";import"./DeleteOutlined-CBiNWy3g.js";import"./index-C_bV-DnG.js";import"./index-CvzSf1Bg.js";import"./DownOutlined-CKTuMrT9.js";import"./index-Bcl-gWmM.js";import"./index-EKub9ikS.js";import"./index-DsYJmDxZ.js";import"./addEventListener-DSaIWks1.js";import"./iconUtil-CrL5XMUw.js";import"./index-BbWS0DN_.js";import"./PurePanel-Qn0-6z3A.js";import"./getAllowClear-61dfOySQ.js";import"./move-BEwii-fV.js";import"./CheckOutlined-DNlRZmOM.js";import"./Input-DBs5aIW3.js";import"./index-BCcQRwwP.js";import"./index-4oTavk15.js";import"./TextArea-B06lod9y.js";import"./LeftOutlined-CXR1ue2q.js";import"./index-BiKlR4w8.js";import"./index-r-JVz4Yx.js";import"./index-BZDhPRiF.js";import"./Table-dye4hUJ0.js";import"./styleChecker-BWYb9pEX.js";import"./index-D0fE36s2.js";import"./dropdown-0heBmOdg.js";import"./index-27J4tOGW.js";import"./Sider-DIX9tLFZ.js";import"./index-DRn2fARs.js";import"./HolderOutlined-c3sLJRZN.js";import"./CaretDownOutlined-Cm7GLJFD.js";import"./index-CHnZ-yQ1.js";import"./index-lKg4xbVK.js";import"./index-lhHkabfZ.js";import"./index-Dx6Z95tT.js";import"./index-B6rUILzb.js";import"./index-BOtvnYjU.js";import"./index-DdonXCdW.js";import"./EditOutlined-DSBmrQxq.js";import"./gapSize-U1swVQyS.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-568H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zm116 240H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7a8.3 8.3 0 00-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7a8.3 8.3 0 002.1-5.4V432c0-2.2-1.8-4-4-4z"}}]},name:"ordered-list",theme:"outlined"},O=function(a,m){return p.createElement(S,I({},a,{ref:m,icon:H}))},P=p.forwardRef(O);const Ee=()=>{const{message:s}=R.useApp(),a=p.useRef(),m=p.useRef(),h=()=>{a.current.reload(),a.current.clearSelected()},[u,g]=p.useState([]),j=()=>{f.updateSort({list:u}).then(r=>{r.code===1?(s.success(r.message),h(),g([]),getList()):s.error(r.message)})},v=(r,t)=>{let o=[...u];o.some(c=>{if(c.id===r)return c.sort=t,!0})||o.push({id:r,sort:t}),g(o)},b=r=>{f.delete({id:r}).then(t=>{t.code===1?(s.success(t.message),h()):s.error(t.message)})},C=[{title:"配置名称",dataIndex:"title",search:!1},{title:"描述",dataIndex:"description",ellipsis:!0},{title:"配置名称",dataIndex:"name",search:!1,copyable:!0,render:(r,t)=>r},{title:"类型",dataIndex:"type",search:!1},{title:"排序",dataIndex:"sort",search:!1,render:(r,t)=>e.jsx(e.Fragment,{children:e.jsx(w,{defaultValue:t.sort,style:{width:"100px"},min:0,disabled:i("configUpdateSort"),onChange:o=>{v(t.id,o)}})})},{title:"操作",dataIndex:"action",search:!1,render:(r,t)=>e.jsxs(e.Fragment,{children:[e.jsx(d,{to:i("configUpdate")?"":`/config/create?id=${t.id}&type=${t.type}`,children:e.jsx(n,{type:"link",size:"small",disabled:i("configUpdate"),children:"修改"})}),e.jsx(L,{title:"确认要删除吗？",onConfirm:()=>{b(t.id)},disabled:i("configDelete"),children:e.jsx(n,{type:"link",size:"small",danger:!0,disabled:i("configDelete"),children:"删除"})})]})}];return e.jsx(e.Fragment,{children:e.jsx(k,{className:"sa-page-container",ghost:!0,header:{title:"其它设置",style:{padding:"0px 24px 12px"}},children:e.jsx(z,{actionRef:a,formRef:m,rowKey:"id",columns:C,scroll:{x:800},search:!1,options:{fullScreen:!0},columnsState:{persistenceKey:"table_column_Config",persistenceType:"localStorage"},headerTitle:e.jsxs(A,{children:[e.jsx(d,{to:i("configCreate")?"":"/config/create?type=form",children:e.jsx(n,{type:"primary",disabled:i("configCreate"),icon:e.jsx(y,{}),children:"添加Form设置"})}),e.jsx(d,{to:i("configCreate")?"":"/config/create?type=list",children:e.jsx(n,{type:"primary",disabled:i("configCreate"),icon:e.jsx(y,{}),children:"添加List设置"})}),e.jsx(n,{type:"primary",onClick:j,disabled:i("configUpdateSort"),icon:e.jsx(P,{}),children:"保存排序"})]}),pagination:!1,request:async(r={},t,o)=>{let l="";for(let x in t)l=x+" "+(t[x]==="descend"?"desc":"asc");const c=await f.getList({...r,orderBy:l,page:r.current});return{data:c.data,success:!0,total:c.data.length}}})})})};export{Ee as default};
