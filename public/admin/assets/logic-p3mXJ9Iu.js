import{A as f,r as a,j as e,B as p}from"./index-CxoETvRH.js";import{a as n}from"./adminCodeGenerator-o3VPck0b.js";import{C as g}from"./index-vDDUv-ak.js";import{S as h}from"./index-BphrQzO9.js";import{R as j,C as l}from"./row-qzGwq4Dr.js";import{W as o}from"./index-B5gW4Hci.js";import{W as b}from"./index-DqNJzPla.js";import{W as P}from"./index-w3B4RVYE.js";import{A as y}from"./index-CKDIzB68.js";import{P as _}from"./ProCard-D6QkQ_g5.js";import{F as C}from"./index-DZIFP8d9.js";import{P as c}from"./index-BV5Zm_mO.js";import{I as F}from"./BaseForm-Ce_dWbWI.js";import{P as q}from"./index-CVCROCWL.js";import"./index-DdonXCdW.js";import"./EditOutlined-DSBmrQxq.js";import"./index-C-0gitmI.js";import"./styleChecker-BWYb9pEX.js";import"./TextArea-B06lod9y.js";import"./getAllowClear-61dfOySQ.js";import"./CheckOutlined-DNlRZmOM.js";import"./CopyOutlined-DoMFKUVx.js";import"./gapSize-U1swVQyS.js";import"./useBreakpoint-9N_aLd03.js";import"./index-DsYJmDxZ.js";import"./index-DPelJOqh.js";import"./index-CvzSf1Bg.js";import"./index-C_bV-DnG.js";import"./DownOutlined-CKTuMrT9.js";import"./index-Bcl-gWmM.js";import"./addEventListener-DSaIWks1.js";import"./Overflow-C1Gv4RUW.js";import"./iconUtil-CrL5XMUw.js";import"./index-BbWS0DN_.js";import"./PurePanel-Qn0-6z3A.js";import"./move-BEwii-fV.js";import"./Input-DBs5aIW3.js";import"./index-BCcQRwwP.js";import"./index-4oTavk15.js";import"./LeftOutlined-CXR1ue2q.js";import"./index-BiKlR4w8.js";import"./progress-Ofxp_QxA.js";import"./index-r-JVz4Yx.js";import"./index-BZDhPRiF.js";import"./index-lhHkabfZ.js";import"./dropdown-0heBmOdg.js";import"./Dropdown-B_0_MLsu.js";import"./index-27J4tOGW.js";import"./EllipsisOutlined-DYRNvKIw.js";import"./Sider-DIX9tLFZ.js";import"./index-CVyj0YhM.js";import"./PlusOutlined-vk23tUE5.js";import"./index-JNVvr94D.js";import"./DeleteOutlined-CBiNWy3g.js";const Ae=({tableName:t,operationFile:d,...w})=>{const{message:m}=f.useApp(),i=a.useRef();a.useEffect(()=>{},[t]);const u=[{value:"updateAll",label:"批量更新字段"},{value:"empty",label:"自己写"}],x=[{value:1,label:"常规逻辑"},{value:2,label:"全表缓存"}];return e.jsxs(e.Fragment,{children:[e.jsx(c,{formRef:i,size:"small",params:{table_name:t},request:async s=>(await n.getCodeGeneratorInfo(s)).data||{},submitter:!1,onFinish:async s=>{n.generatorCode({logic:{...s.logic,file_suffix:"php"},table_name:t,code_name:"logic"}).then(r=>{r.code===1?(m.success(r.message),i.current.setFieldValue("logic_code",r.data.logic_code)):m.error(r.message)})},children:e.jsxs(h,{direction:"vertical",style:{width:"100%"},children:[e.jsxs(j,{gutter:[24,0],children:[e.jsx(l,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:e.jsx(o,{name:["logic","file_name"],label:"逻辑层类名",placeholder:"请输入",rules:[{required:!0,message:"请输入"}]})}),e.jsx(l,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:e.jsx(o,{name:["logic","file_path"],label:"命名空间",placeholder:"请输入",extra:"逻辑层路劲，同时也是命名空间",rules:[{required:!0,message:"请输入"}]})}),e.jsx(l,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:e.jsx(b.Group,{name:["logic","logic_type"],label:"逻辑层类型",rules:[{required:!0,message:"请输入"}],options:x,extra:"全表缓存列表将不翻页"})})]}),e.jsx(F,{name:["logic","other_functions"],label:"添加其它方法",creatorButtonProps:{creatorButtonText:"添加方法"},children:e.jsxs(q,{children:[e.jsx(o,{name:"title",label:"方法名称(中文)",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],fieldProps:{style:{width:180}}}),e.jsx(o,{name:"name",label:"方法名称(英文)",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],fieldProps:{style:{width:180}}}),e.jsx(P,{name:"function_content",label:"方法主体内容",placeholder:"请选择",options:u,rules:[{required:!0,message:"请输入"}],fieldProps:{style:{width:180}}})]})}),e.jsx(c.Item,{name:"logic_code",children:e.jsx(g,{language:"php"})})]})}),e.jsx(y,{offsetBottom:10,children:e.jsx(_,{boxShadow:!0,children:e.jsxs(C,{align:"center",justify:"center",gap:"small",children:[e.jsx(p,{type:"primary",size:"default",onClick:()=>{i.current.submit()},children:"保存设置》生成预览代码"}),e.jsx(p,{danger:!0,onClick:()=>{d("logic")},children:"生成到项目"})]})})})]})};export{Ae as default};
