import{A as G,r as h,m as H,j as l}from"./index-ZI51y314.js";import{a as S}from"./adminCodeGenerator-1uF-yRli.js";import{a as J}from"./adminMenu-uwbNihI8.js";import{R as Q,C as m}from"./row-CA0HzO8K.js";import{W as i}from"./index-jrhCuYmp.js";import{W as p}from"./index-D4bfMQDp.js";import{W as X}from"./index-CqndwiBH.js";import{D as Y}from"./index-DnKcHXc3.js";import{P as g}from"./index-B_vyTJVd.js";import{F as x}from"./index-DkAOSd03.js";import{T as Z}from"./index-BIgUuT9u.js";import{R as ee}from"./index-DPgpDBVC.js";import"./useBreakpoint-LlaO7o8U.js";import"./BaseForm-Dt9roNn_.js";import"./index-BQOafed3.js";import"./CopyOutlined-Di_ABAcP.js";import"./DeleteOutlined-BJQ6Ec5G.js";import"./PlusOutlined-BrSmXzHo.js";import"./index-DxRnNHO_.js";import"./Table-B6v6YKM6.js";import"./ProCard-CQJ5thSX.js";import"./index-Cn0WBpt6.js";import"./index-DuZOyzfN.js";import"./EllipsisOutlined-rOnf-sW7.js";import"./Overflow-6EGZ5_au.js";import"./Dropdown-D-H8baFE.js";import"./index-Cqf3aS8y.js";import"./index-ClH-H18i.js";import"./index-DFWIh5En.js";import"./gapSize-U1swVQyS.js";import"./index-Dm2ANYsS.js";import"./DownOutlined-BvFNYu2h.js";import"./index-Cl5zAUSu.js";import"./Table-DRKnGQZA.js";import"./styleChecker-nFJfeipz.js";import"./addEventListener-2k7hxYrj.js";import"./iconUtil-snskxn8a.js";import"./index-C4Es4GTO.js";import"./PurePanel-IzJJVpwi.js";import"./getAllowClear-Bb8ihI2F.js";import"./move-D1aXciBO.js";import"./CheckOutlined-BH5QPYjn.js";import"./Input-YyHXjDeB.js";import"./index-B94rXkjj.js";import"./index-DbzUeGO6.js";import"./dropdown-CBTinjep.js";import"./LeftOutlined-DLD2DGED.js";import"./index-YSn64RDr.js";import"./Sider-BPr4VxAy.js";import"./index-BWfJjs86.js";import"./HolderOutlined-51iibq6a.js";import"./CaretDownOutlined-902wn7sG.js";import"./index-0LiqU0NK.js";import"./index-AV8iSHwq.js";import"./index-CqBDmXPg.js";import"./index-lhHkabfZ.js";import"./index-DWBnXa5p.js";import"./index-DujqzdOS.js";import"./index-rQeGZp6R.js";import"./progress-DyKaNkG9.js";import"./index-D32vO3So.js";import"./index-CzgBx6dd.js";import"./TextArea-CbhGwHw0.js";import"./index-Ig2XVJMn.js";import"./EditOutlined-C2XE2Of8.js";import"./core.esm-uR2lXNm7.js";import"./index-CJ6fB5dR.js";import"./index-Bo_cWNs1.js";const _l=({tableName:b,...le})=>{const{message:y}=G.useApp();h.useEffect(()=>{b&&(C(),A(),R())},[b]);const[v,F]=h.useState([]),C=()=>{S.getTableColumn({table_name:b}).then(e=>{e.code===1?F(e.data):y.error(e.message)})},[P,T]=h.useState([]),A=()=>{S.getTableList().then(e=>{e.code===1?T(e.data):y.error(e.message)})},[M,w]=h.useState([]),R=()=>{J.getList({hidden:"all"}).then(e=>{e.code===1&&w(H(e.data))})},$=[{value:"Text",label:"文本输入"},{value:"Password",label:"密码输入"},{value:"TextArea",label:"多行文本输入"},{value:"Digit",label:"数字输入"},{value:"DigitRange",label:"数字区间输入"},{value:"DatePicker",label:"日期选择"},{value:"DateTimePicker",label:"日期+时间选择"},{value:"DateRangePicker",label:"日期区间选择"},{value:"DateTimeRangePicker",label:"日期+时间区间选择"},{value:"TimePicker",label:"时间选择"},{value:"TimePickerRange",label:"时间区间选择"},{value:"Select",label:"下拉"},{value:"TreeSelect",label:"树选择"},{value:"SelectTable",label:"异步搜索选择某个表的id"},{value:"Checkbox",label:"Checkbox多选"},{value:"Radio",label:"Radio单选"},{value:"Cascader",label:"Cascaderlian级联选择"},{value:"Switch",label:"Switch开关"},{value:"province",label:"省选择"},{value:"provinceCity",label:"省市选择"},{value:"provinceCityArea",label:"省市区选择"},{value:"tagArr",label:"tag数组"},{value:"imgTitle",label:"姓名+图片的数组"},{value:"tencentMap",label:"腾讯经纬度选择"},{value:"uploadFile",label:"上传单个文件"},{value:"uploadFileAll",label:"上传多个文件"},{value:"uploadImg",label:"上传单张图片"},{value:"uploadImgAll",label:"上传多张图片"},{value:"uploadImgVideoAll",label:"上传图片或视频"},{value:"teditor",label:"富文本编辑器"}],D=e=>l.jsx(p,{name:["react_other","form_fields_type_config",`${e}`,"addonBefore"],placeholder:"请输入...",fieldProps:{addonBefore:"前缀",style:{margin:"2px 0px"}}},"addonBefore"),I=e=>l.jsx(p,{name:["react_other","form_fields_type_config",`${e}`,"addonAfter"],placeholder:"请输入...",fieldProps:{addonBefore:"后缀",style:{margin:"2px 0px"}}},"addonAfter"),q=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"validateRules"],placeholder:"验证规则",options:[{label:"必填",value:"required"},{label:"URL链接",value:"url"},{label:"邮箱",value:"email"},{label:"手机号",value:"tel"},{label:"最小|长度",value:"min"},{label:"最大|长度",value:"max"},{label:"固定长度",value:"len"}],fieldProps:{popupMatchSelectWidth:!1,mode:"multiple",allowClear:!0,style:{margin:"2px 0px"}}},"validateRules"),W=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"dataSource"],placeholder:"请选择数据来源",options:[{label:"自己填写选择项",value:"options"},{label:"API请求选择项",value:"request"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[{required:!0,message:"请选择"}]},"dataSource"),k=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"provinceCityAreaValueType"],placeholder:"选择后需要类型",options:[{label:"需要标题",value:"title"},{label:"需要ID",value:"id"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[{required:!0,message:"请选择"}]},"provinceCityAreaValueType"),N=e=>l.jsxs("div",{children:[l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"selectMode"],placeholder:"是否多选",options:[{label:"多选multiple",value:"multiple"},{label:"多选加自定义输入tags",value:"tags"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[]},"selectMode"),l.jsx(g,{name:[["react_other","form_fields_type_config",`${e}`,"selectMode"]],children:({react_other:a})=>{var n,u;if((u=(n=a==null?void 0:a.form_fields_type_config)==null?void 0:n[e])==null?void 0:u.selectMode)return l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"maxCount"],placeholder:"最大选择条数",min:1,fieldProps:{addonBefore:"最多",style:{margin:"2px 0px"},addonAfter:"条",precision:0},rules:[]},"maxCountNumber")}},"maxCount")]},"selectModeWarp"),B=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"treeCheckable"],placeholder:"显示Checkbox",options:[{label:"显示Checkbox",value:"treeCheckable"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[]},"treeCheckable"),L=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"cascaderMultiple"],placeholder:"是否多选",options:[{label:"cascaderMultiple",value:"cascaderMultiple"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[]},"cascaderMultiple"),O=e=>l.jsx(p,{name:["react_other","form_fields_type_config",`${e}`,"fileSuffix"],placeholder:"请输入",fieldProps:{addonBefore:"允许文件后缀",style:{margin:"2px 0px"},addonAfter:l.jsx(Z,{title:"用英文逗号隔开如：ppt,docx",children:l.jsx(ee,{})})},rules:[{required:!0,message:"请输入"}]},"fileSuffix"),V=e=>l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"maxUploadCount"],placeholder:"请输入",fieldProps:{addonBefore:"最大上传数量",style:{margin:"2px 0px"},precision:0},min:1},"maxUploadCount"),E=e=>l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"minNumber"],placeholder:"请输入",fieldProps:{addonBefore:"最小|长度",style:{margin:"2px 0px"},precision:0},min:1,rules:[{required:!0,message:"请输入"}]},"minNumber"),U=e=>l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"maxNumber"],placeholder:"请输入",fieldProps:{addonBefore:"最大|长度",style:{margin:"2px 0px"},precision:0},min:1,rules:[{required:!0,message:"请输入"}]},"maxNumber"),K=e=>l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"lenNumber"],placeholder:"请输入",fieldProps:{addonBefore:"固定|长度",style:{margin:"2px 0px"},precision:0},min:1,rules:[{required:!0,message:"请输入"}]},"lenNumber"),z=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"dependencyField"],placeholder:"当xx字段xx的时候才显示",request:async()=>v,fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"},fieldNames:{value:"Field",label:"Field"},optionRender:a=>`关联字段：${a.label}`},extra:"关联字段：当xx字段xx的时候才显示",rules:[]},"dependencyField"),j=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"dataSourceTable"],placeholder:"请选择数据来源",options:P,showSearch:!0,fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"},fieldNames:{value:"Name",label:"Name"}},extra:"选择项数据来源表",rules:[{required:!0,message:"请选择"}]},"dataSourceTable");return l.jsxs(l.Fragment,{children:[l.jsxs(Q,{gutter:[24,0],children:[l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(i,{name:["react_other","modal_form_row_columns_number"],label:"每行显示几个字段",placeholder:"请选择",rules:[{required:!0,message:"请选择"}],options:[{label:"1个",value:1},{label:"2个",value:2},{label:"3个",value:3},{label:"4个",value:4}]})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(p,{name:["react_other","modal_form_file_path"],label:"生成的目录",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],extra:"从public开始写，如：public/admin_react/src/xxxx"})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(p,{name:["react_other","modal_form_file_name"],label:"生成的文件名称",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],extra:"要带后缀"})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(X,{name:["react_other","modal_form_auth_id"],label:"操作权限",placeholder:"请选择",rules:[],fieldProps:{showSearch:!0,treeNodeFilterProp:"title",treeData:M,fieldNames:{lable:"title",value:"name"}}})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(p,{name:["react_other","modal_form_title"],label:"弹窗标题",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],extra:"如：修改分类"})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(p,{name:["react_other","modal_form_api_name"],label:"接口方法名称",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],extra:"如：updateClass"})})]}),l.jsx(Y,{className:"generator-create-update-from",ghost:!0,columns:[{title:"排序",dataIndex:"sort",width:50},{title:"字段",width:200,dataIndex:"Field"},{title:"类型",width:120,dataIndex:"Type"},{title:"默认值",dataIndex:"Default",width:70,render:(e,a)=>a.Default?a.Default:a.Default===null?"null":""},{title:"注释",dataIndex:"Comment",ellipsis:!0},{title:"字段名称",dataIndex:"field_title"},{title:"表单字段类型",dataIndex:"form_fileds_type",render:(e,a)=>l.jsx(l.Fragment,{children:l.jsx(i,{name:["react_other","form_fileds_type",`${a.Field}`],placeholder:"请选择",request:async()=>$,fieldProps:{showSearch:!0,popupMatchSelectWidth:!1}})})},{title:"字段配置",dataIndex:"form_fields_type_config",width:350,render:(e,a)=>l.jsxs(l.Fragment,{children:[l.jsx(g,{name:[["react_other","form_fileds_type",a.Field]],children:({react_other:o})=>{var n,u;if((n=o==null?void 0:o.form_fileds_type)!=null&&n[a.Field]){const r=(u=o==null?void 0:o.form_fileds_type)==null?void 0:u[a.Field],t=[];return t.push(q(a.Field)),(r=="Text"||r=="Digit")&&(t.push(D(a.Field)),t.push(I(a.Field))),["Select","TreeSelect","Checkbox","Radio","Cascader"].indexOf(r)!==-1&&(t.push(W(a.Field)),t.push(l.jsx(g,{name:[["react_other","form_fields_type_config",a.Field,"dataSource"]],children:({react_other:d})=>{var f,c;const s=(c=(f=d==null?void 0:d.form_fields_type_config)==null?void 0:f[a.Field])==null?void 0:c.dataSource;if(s&&s=="request")return j(a.Field)}},"2"))),["SelectTable"].indexOf(r)!==-1&&t.push(j(a.Field)),["uploadFile","uploadFileAll"].indexOf(r)!==-1&&t.push(O(a.Field)),["uploadImgAll","uploadFileAll","uploadImgVideoAll"].indexOf(r)!==-1&&t.push(V(a.Field)),t.push(l.jsx(g,{name:[["react_other","form_fields_type_config",a.Field,"validateRules"]],children:({react_other:d})=>{var f,c;const s=(c=(f=d==null?void 0:d.form_fields_type_config)==null?void 0:f[a.Field])==null?void 0:c.validateRules;if(Array.isArray(s)&&s.length>0){const _=[];return s.indexOf("min")!==-1&&_.push(E(a.Field)),s.indexOf("max")!==-1&&_.push(U(a.Field)),s.indexOf("len")!==-1&&_.push(K(a.Field)),_}}},"1")),r=="Select"&&t.push(N(a.Field)),r=="TreeSelect"&&t.push(B(a.Field)),r=="Cascader"&&t.push(L(a.Field)),["province","provinceCity","provinceCityArea"].indexOf(r)!==-1&&t.push(k(a.Field)),t.push(z(a.Field)),t}return""}}),l.jsx(p,{name:["react_other","form_fields_type_config",`${a.Field}`,"extra"],placeholder:"字段提示信息",fieldProps:{style:{margin:"2px 0px"}}})]})}],rowKey:"Field",search:!1,pagination:!1,options:!1,defaultSize:"small",bordered:!0,dragSortKey:"sort",onDragSortEnd:(e,a,o)=>{F(o)},dataSource:v})]})};export{_l as default};
