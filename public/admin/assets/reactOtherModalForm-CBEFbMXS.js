import{A as G,r as h,m as H,j as l}from"./index-BTXTJVKt.js";import{a as S}from"./adminCodeGenerator-XA6WtBhQ.js";import{a as J}from"./adminMenu-Hr-Zrko8.js";import{R as Q,C as m}from"./row-DJNm5-9Y.js";import{W as i}from"./index-CNcHXf2n.js";import{W as p}from"./index-BMuvgOFD.js";import{W as X}from"./index-2DT4l-EF.js";import{D as Y}from"./index-Dwni2OoB.js";import{P as g}from"./index-Cpu1JcVa.js";import{F as x}from"./index-CaCv7gJm.js";import{T as Z}from"./index-DWyRM-jO.js";import{R as ee}from"./index-CsweGtVO.js";import"./useBreakpoint-C9P5ZgXD.js";import"./BaseForm-Bt-x2uS5.js";import"./index-DwWsiyHK.js";import"./CopyOutlined-Bqo58qRo.js";import"./DeleteOutlined-sMe1csST.js";import"./PlusOutlined-DhDAnJdR.js";import"./index-CBjIPB84.js";import"./Table-CUXyCVLs.js";import"./ProCard-BTx7yLUQ.js";import"./index-Ck2b4VHc.js";import"./index-CHGWkdWj.js";import"./EllipsisOutlined-BzWcE7tF.js";import"./Overflow-DodMVMUF.js";import"./Dropdown-D-FCcTPI.js";import"./index-DWwHrh8G.js";import"./index-D_n6I86r.js";import"./index-B1B7dhZb.js";import"./gapSize-U1swVQyS.js";import"./index-BaexhYUL.js";import"./DownOutlined-dHMiLU6h.js";import"./index-ZV6Sdybn.js";import"./Table-ButWyQXY.js";import"./styleChecker-xca8e-q0.js";import"./addEventListener-BQxGY-6f.js";import"./iconUtil-0otcsGdb.js";import"./index-D1w3VCkm.js";import"./PurePanel-BJ0dSvru.js";import"./getAllowClear-SV9Asyat.js";import"./move-BiL2XrK1.js";import"./CheckOutlined-CRheHqkM.js";import"./Input-CJszbmX7.js";import"./index-Ci-Y97rG.js";import"./index-Clo_9DB7.js";import"./dropdown-ozNz9IXP.js";import"./LeftOutlined-CNJksXTb.js";import"./index-D2NRD51k.js";import"./Sider-clMwekzu.js";import"./index-B9ywFgu1.js";import"./HolderOutlined-DO80hp-F.js";import"./CaretDownOutlined-BWLnnrSk.js";import"./index-Dnt0D-Vv.js";import"./index-DiR_3Q38.js";import"./index-hKAX5Tgp.js";import"./index-lhHkabfZ.js";import"./index-CcMUfAok.js";import"./index-1Ew_B_KM.js";import"./index-JJDTxIwy.js";import"./progress-C-smal5r.js";import"./index-Wn9_u9d6.js";import"./index-DZ2tAw4A.js";import"./TextArea-Dm9DBQS4.js";import"./index-Dx9hPCiE.js";import"./EditOutlined-Jb-cOsu8.js";import"./core.esm-Ds3LvBvm.js";import"./index-BfhOKpHw.js";import"./index-D5nMW6Hn.js";const _l=({tableName:b,...le})=>{const{message:y}=G.useApp();h.useEffect(()=>{b&&(C(),A(),R())},[b]);const[v,F]=h.useState([]),C=()=>{S.getTableColumn({table_name:b}).then(e=>{e.code===1?F(e.data):y.error(e.message)})},[P,T]=h.useState([]),A=()=>{S.getTableList().then(e=>{e.code===1?T(e.data):y.error(e.message)})},[M,w]=h.useState([]),R=()=>{J.getList({hidden:"all"}).then(e=>{e.code===1&&w(H(e.data))})},$=[{value:"Text",label:"文本输入"},{value:"Password",label:"密码输入"},{value:"TextArea",label:"多行文本输入"},{value:"Digit",label:"数字输入"},{value:"DigitRange",label:"数字区间输入"},{value:"DatePicker",label:"日期选择"},{value:"DateTimePicker",label:"日期+时间选择"},{value:"DateRangePicker",label:"日期区间选择"},{value:"DateTimeRangePicker",label:"日期+时间区间选择"},{value:"TimePicker",label:"时间选择"},{value:"TimePickerRange",label:"时间区间选择"},{value:"Select",label:"下拉"},{value:"TreeSelect",label:"树选择"},{value:"SelectTable",label:"异步搜索选择某个表的id"},{value:"Checkbox",label:"Checkbox多选"},{value:"Radio",label:"Radio单选"},{value:"Cascader",label:"Cascaderlian级联选择"},{value:"Switch",label:"Switch开关"},{value:"province",label:"省选择"},{value:"provinceCity",label:"省市选择"},{value:"provinceCityArea",label:"省市区选择"},{value:"tagArr",label:"tag数组"},{value:"imgTitle",label:"姓名+图片的数组"},{value:"tencentMap",label:"腾讯经纬度选择"},{value:"uploadFile",label:"上传单个文件"},{value:"uploadFileAll",label:"上传多个文件"},{value:"uploadImg",label:"上传单张图片"},{value:"uploadImgAll",label:"上传多张图片"},{value:"uploadImgVideoAll",label:"上传图片或视频"},{value:"teditor",label:"富文本编辑器"}],D=e=>l.jsx(p,{name:["react_other","form_fields_type_config",`${e}`,"addonBefore"],placeholder:"请输入...",fieldProps:{addonBefore:"前缀",style:{margin:"2px 0px"}}},"addonBefore"),I=e=>l.jsx(p,{name:["react_other","form_fields_type_config",`${e}`,"addonAfter"],placeholder:"请输入...",fieldProps:{addonBefore:"后缀",style:{margin:"2px 0px"}}},"addonAfter"),q=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"validateRules"],placeholder:"验证规则",options:[{label:"必填",value:"required"},{label:"URL链接",value:"url"},{label:"邮箱",value:"email"},{label:"手机号",value:"tel"},{label:"最小|长度",value:"min"},{label:"最大|长度",value:"max"},{label:"固定长度",value:"len"}],fieldProps:{popupMatchSelectWidth:!1,mode:"multiple",allowClear:!0,style:{margin:"2px 0px"}}},"validateRules"),W=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"dataSource"],placeholder:"请选择数据来源",options:[{label:"自己填写选择项",value:"options"},{label:"API请求选择项",value:"request"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[{required:!0,message:"请选择"}]},"dataSource"),k=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"provinceCityAreaValueType"],placeholder:"选择后需要类型",options:[{label:"需要标题",value:"title"},{label:"需要ID",value:"id"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[{required:!0,message:"请选择"}]},"provinceCityAreaValueType"),N=e=>l.jsxs("div",{children:[l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"selectMode"],placeholder:"是否多选",options:[{label:"多选multiple",value:"multiple"},{label:"多选加自定义输入tags",value:"tags"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[]},"selectMode"),l.jsx(g,{name:[["react_other","form_fields_type_config",`${e}`,"selectMode"]],children:({react_other:a})=>{var n,u;if((u=(n=a==null?void 0:a.form_fields_type_config)==null?void 0:n[e])==null?void 0:u.selectMode)return l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"maxCount"],placeholder:"最大选择条数",min:1,fieldProps:{addonBefore:"最多",style:{margin:"2px 0px"},addonAfter:"条",precision:0},rules:[]},"maxCountNumber")}},"maxCount")]},"selectModeWarp"),B=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"treeCheckable"],placeholder:"显示Checkbox",options:[{label:"显示Checkbox",value:"treeCheckable"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[]},"treeCheckable"),L=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"cascaderMultiple"],placeholder:"是否多选",options:[{label:"cascaderMultiple",value:"cascaderMultiple"}],fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"}},rules:[]},"cascaderMultiple"),O=e=>l.jsx(p,{name:["react_other","form_fields_type_config",`${e}`,"fileSuffix"],placeholder:"请输入",fieldProps:{addonBefore:"允许文件后缀",style:{margin:"2px 0px"},addonAfter:l.jsx(Z,{title:"用英文逗号隔开如：ppt,docx",children:l.jsx(ee,{})})},rules:[{required:!0,message:"请输入"}]},"fileSuffix"),V=e=>l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"maxUploadCount"],placeholder:"请输入",fieldProps:{addonBefore:"最大上传数量",style:{margin:"2px 0px"},precision:0},min:1},"maxUploadCount"),E=e=>l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"minNumber"],placeholder:"请输入",fieldProps:{addonBefore:"最小|长度",style:{margin:"2px 0px"},precision:0},min:1,rules:[{required:!0,message:"请输入"}]},"minNumber"),U=e=>l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"maxNumber"],placeholder:"请输入",fieldProps:{addonBefore:"最大|长度",style:{margin:"2px 0px"},precision:0},min:1,rules:[{required:!0,message:"请输入"}]},"maxNumber"),K=e=>l.jsx(x,{name:["react_other","form_fields_type_config",`${e}`,"lenNumber"],placeholder:"请输入",fieldProps:{addonBefore:"固定|长度",style:{margin:"2px 0px"},precision:0},min:1,rules:[{required:!0,message:"请输入"}]},"lenNumber"),z=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"dependencyField"],placeholder:"当xx字段xx的时候才显示",request:async()=>v,fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"},fieldNames:{value:"Field",label:"Field"},optionRender:a=>`关联字段：${a.label}`},extra:"关联字段：当xx字段xx的时候才显示",rules:[]},"dependencyField"),j=e=>l.jsx(i,{name:["react_other","form_fields_type_config",`${e}`,"dataSourceTable"],placeholder:"请选择数据来源",options:P,showSearch:!0,fieldProps:{popupMatchSelectWidth:!1,allowClear:!0,style:{margin:"2px 0px"},fieldNames:{value:"Name",label:"Name"}},extra:"选择项数据来源表",rules:[{required:!0,message:"请选择"}]},"dataSourceTable");return l.jsxs(l.Fragment,{children:[l.jsxs(Q,{gutter:[24,0],children:[l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(i,{name:["react_other","modal_form_row_columns_number"],label:"每行显示几个字段",placeholder:"请选择",rules:[{required:!0,message:"请选择"}],options:[{label:"1个",value:1},{label:"2个",value:2},{label:"3个",value:3},{label:"4个",value:4}]})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(p,{name:["react_other","modal_form_file_path"],label:"生成的目录",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],extra:"从public开始写，如：public/admin_react/src/xxxx"})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(p,{name:["react_other","modal_form_file_name"],label:"生成的文件名称",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],extra:"要带后缀"})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(X,{name:["react_other","modal_form_auth_id"],label:"操作权限",placeholder:"请选择",rules:[],fieldProps:{showSearch:!0,treeNodeFilterProp:"title",treeData:M,fieldNames:{lable:"title",value:"name"}}})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(p,{name:["react_other","modal_form_title"],label:"弹窗标题",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],extra:"如：修改分类"})}),l.jsx(m,{xs:24,sm:12,md:12,lg:8,xl:6,xxl:6,children:l.jsx(p,{name:["react_other","modal_form_api_name"],label:"接口方法名称",placeholder:"请输入",rules:[{required:!0,message:"请输入"}],extra:"如：updateClass"})})]}),l.jsx(Y,{className:"generator-create-update-from",ghost:!0,columns:[{title:"排序",dataIndex:"sort",width:50},{title:"字段",width:200,dataIndex:"Field"},{title:"类型",width:120,dataIndex:"Type"},{title:"默认值",dataIndex:"Default",width:70,render:(e,a)=>a.Default?a.Default:a.Default===null?"null":""},{title:"注释",dataIndex:"Comment",ellipsis:!0},{title:"字段名称",dataIndex:"field_title"},{title:"表单字段类型",dataIndex:"form_fileds_type",render:(e,a)=>l.jsx(l.Fragment,{children:l.jsx(i,{name:["react_other","form_fileds_type",`${a.Field}`],placeholder:"请选择",request:async()=>$,fieldProps:{showSearch:!0,popupMatchSelectWidth:!1}})})},{title:"字段配置",dataIndex:"form_fields_type_config",width:350,render:(e,a)=>l.jsxs(l.Fragment,{children:[l.jsx(g,{name:[["react_other","form_fileds_type",a.Field]],children:({react_other:o})=>{var n,u;if((n=o==null?void 0:o.form_fileds_type)!=null&&n[a.Field]){const r=(u=o==null?void 0:o.form_fileds_type)==null?void 0:u[a.Field],t=[];return t.push(q(a.Field)),(r=="Text"||r=="Digit")&&(t.push(D(a.Field)),t.push(I(a.Field))),["Select","TreeSelect","Checkbox","Radio","Cascader"].indexOf(r)!==-1&&(t.push(W(a.Field)),t.push(l.jsx(g,{name:[["react_other","form_fields_type_config",a.Field,"dataSource"]],children:({react_other:d})=>{var f,c;const s=(c=(f=d==null?void 0:d.form_fields_type_config)==null?void 0:f[a.Field])==null?void 0:c.dataSource;if(s&&s=="request")return j(a.Field)}},"2"))),["SelectTable"].indexOf(r)!==-1&&t.push(j(a.Field)),["uploadFile","uploadFileAll"].indexOf(r)!==-1&&t.push(O(a.Field)),["uploadImgAll","uploadFileAll","uploadImgVideoAll"].indexOf(r)!==-1&&t.push(V(a.Field)),t.push(l.jsx(g,{name:[["react_other","form_fields_type_config",a.Field,"validateRules"]],children:({react_other:d})=>{var f,c;const s=(c=(f=d==null?void 0:d.form_fields_type_config)==null?void 0:f[a.Field])==null?void 0:c.validateRules;if(Array.isArray(s)&&s.length>0){const _=[];return s.indexOf("min")!==-1&&_.push(E(a.Field)),s.indexOf("max")!==-1&&_.push(U(a.Field)),s.indexOf("len")!==-1&&_.push(K(a.Field)),_}}},"1")),r=="Select"&&t.push(N(a.Field)),r=="TreeSelect"&&t.push(B(a.Field)),r=="Cascader"&&t.push(L(a.Field)),["province","provinceCity","provinceCityArea"].indexOf(r)!==-1&&t.push(k(a.Field)),t.push(z(a.Field)),t}return""}}),l.jsx(p,{name:["react_other","form_fields_type_config",`${a.Field}`,"extra"],placeholder:"字段提示信息",fieldProps:{style:{margin:"2px 0px"}}})]})}],rowKey:"Field",search:!1,pagination:!1,options:!1,defaultSize:"small",bordered:!0,dragSortKey:"sort",onDragSortEnd:(e,a,o)=>{F(o)},dataSource:v})]})};export{_l as default};
