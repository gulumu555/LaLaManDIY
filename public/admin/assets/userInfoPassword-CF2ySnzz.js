import{R as g,z as f,r as j,A as h,v as w,j as e,b as I,d5 as b}from"./index-CxoETvRH.js";import{u as v}from"./index-8lLMZ2oU.js";import{F as s}from"./index-C_bV-DnG.js";import{R as r}from"./LockOutlined-wOc0j64g.js";import{M as P}from"./index-BOtvnYjU.js";import{I as t}from"./index-4oTavk15.js";import"./row-qzGwq4Dr.js";import"./useBreakpoint-9N_aLd03.js";import"./index-C-0gitmI.js";import"./PurePanel-Qn0-6z3A.js";import"./getAllowClear-61dfOySQ.js";import"./Input-DBs5aIW3.js";import"./TextArea-B06lod9y.js";const y=()=>{const[l,{toggle:o}]=v(),[U,p]=g(f),[c,m]=j.useState(!1),[i]=s.useForm(),{message:n}=h.useApp(),u=w(),x=()=>{i.validateFields().then(d=>{m(!0),I.updatePassword(d).then(a=>{a.code===1?(n.success(a.message),b.remove("adminUserToken"),sessionStorage.removeItem("adminUserToken"),p({}),setTimeout(()=>{u("/login")},1e3),o()):n.error(a.message),m(!1)})}).catch(d=>{})};return e.jsxs(e.Fragment,{children:[e.jsxs("span",{onClick:o,children:[e.jsx(r,{})," 修改密码"]}),e.jsx(P,{open:l,title:"修改资料",onCancel:o,confirmLoading:c,onOk:x,width:400,children:e.jsxs(s,{form:i,layout:"vertical",name:"userInfoPassword",children:[e.jsx(s.Item,{name:"password",label:"原密码",rules:[{required:!0,message:"请输入原密码~"}],children:e.jsx(t.Password,{prefix:e.jsx(r,{}),placeholder:"请输入原密码"})}),e.jsx(s.Item,{name:"new_password",label:"新密码",rules:[{required:!0,message:"请输入新密码"},{min:6,message:"密码长度6-16位"},{max:16,message:"密码长度6-16位"}],children:e.jsx(t.Password,{prefix:e.jsx(r,{}),placeholder:"请输入6-16位新密码"})}),e.jsx(s.Item,{name:"confirm_password",label:"再次输入",rules:[{required:!0,message:"请再次输入新密码"},{min:6,message:"密码长度6-16位"},{max:16,message:"密码长度6-16位"}],children:e.jsx(t.Password,{prefix:e.jsx(r,{}),placeholder:"请输入6-16位新密码"})})]})})]})};export{y as default};
