import{R as g,z as f,r as j,A as h,v as w,j as e,b as I,d5 as b}from"./index-BTXTJVKt.js";import{u as v}from"./index-DZG5aubS.js";import{F as s}from"./index-CsweGtVO.js";import{R as r}from"./LockOutlined-BzQCAXPH.js";import{M as P}from"./index-JJDTxIwy.js";import{I as t}from"./index-DZ2tAw4A.js";import"./row-DJNm5-9Y.js";import"./useBreakpoint-C9P5ZgXD.js";import"./index-DWyRM-jO.js";import"./PurePanel-BJ0dSvru.js";import"./getAllowClear-SV9Asyat.js";import"./Input-CJszbmX7.js";import"./TextArea-Dm9DBQS4.js";const y=()=>{const[l,{toggle:o}]=v(),[U,p]=g(f),[c,m]=j.useState(!1),[i]=s.useForm(),{message:n}=h.useApp(),u=w(),x=()=>{i.validateFields().then(d=>{m(!0),I.updatePassword(d).then(a=>{a.code===1?(n.success(a.message),b.remove("adminUserToken"),sessionStorage.removeItem("adminUserToken"),p({}),setTimeout(()=>{u("/login")},1e3),o()):n.error(a.message),m(!1)})}).catch(d=>{})};return e.jsxs(e.Fragment,{children:[e.jsxs("span",{onClick:o,children:[e.jsx(r,{})," 修改密码"]}),e.jsx(P,{open:l,title:"修改资料",onCancel:o,confirmLoading:c,onOk:x,width:400,children:e.jsxs(s,{form:i,layout:"vertical",name:"userInfoPassword",children:[e.jsx(s.Item,{name:"password",label:"原密码",rules:[{required:!0,message:"请输入原密码~"}],children:e.jsx(t.Password,{prefix:e.jsx(r,{}),placeholder:"请输入原密码"})}),e.jsx(s.Item,{name:"new_password",label:"新密码",rules:[{required:!0,message:"请输入新密码"},{min:6,message:"密码长度6-16位"},{max:16,message:"密码长度6-16位"}],children:e.jsx(t.Password,{prefix:e.jsx(r,{}),placeholder:"请输入6-16位新密码"})}),e.jsx(s.Item,{name:"confirm_password",label:"再次输入",rules:[{required:!0,message:"请再次输入新密码"},{min:6,message:"密码长度6-16位"},{max:16,message:"密码长度6-16位"}],children:e.jsx(t.Password,{prefix:e.jsx(r,{}),placeholder:"请输入6-16位新密码"})})]})})]})};export{y as default};
